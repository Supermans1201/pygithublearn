From 0693b535279ad2f39b2011af7564a3a1c441826b Mon Sep 17 00:00:00 2001
From: Ngewi Fet <ngewif@gmail.com>
Date: Tue, 28 Jan 2014 18:08:53 +0100
Subject: [PATCH] FIXME: double transactions for editing have wrong sign/type
 when opened Fixed: CASH accounts should be treated like asset accounts Fixed:
 Transaction type not properly loaded from database Fixed: Tab title color not
 shown for favorite/recent accounts immediately after app launch Fixed: Crash
 when opening and quickly navigating away from list of transactions due to
 back Added default commonly used account structure for de_AT locale Updated
 dialog confirmation text for creating default accounts Updated German
 translation Code refactoring

---
 app/res/menu/account_actions.xml                   |  16 +-
 .../default_accounts.gnucash                       |   0
 app/res/raw-de-rDE/default_accounts.gnucash        | 937 +++++++++++++++++++++
 app/res/values-de/strings.xml                      |  72 +-
 app/res/values-el/strings.xml                      |   6 +-
 app/res/values-es-rMX/strings.xml                  |   6 +-
 app/res/values-es/strings.xml                      |   6 +-
 app/res/values-fr/strings.xml                      |   6 +-
 app/res/values-hu/strings.xml                      |   6 +-
 app/res/values-it/strings.xml                      |   6 +-
 app/res/values-nb/strings.xml                      |   6 +-
 app/res/values-nl/strings.xml                      |   6 +-
 app/res/values-pt-rBR/strings.xml                  |   6 +-
 app/res/values-ru/strings.xml                      |   6 +-
 app/res/values-zh/strings.xml                      |   6 +-
 app/res/values/strings.xml                         |  10 +-
 app/src/org/gnucash/android/data/Account.java      |  36 +-
 .../org/gnucash/android/db/AccountsDbAdapter.java  |  16 +-
 .../gnucash/android/db/TransactionsDbAdapter.java  |  52 +-
 .../android/ui/accounts/AccountsActivity.java      |   6 +
 .../android/ui/accounts/AccountsListFragment.java  |  24 +-
 .../ui/settings/AccountPreferencesFragment.java    |  12 +-
 .../ui/transactions/NewTransactionFragment.java    |  41 +-
 .../ui/transactions/TransactionsActivity.java      |  13 +-
 .../ui/transactions/TransactionsListFragment.java  | 113 ++-
 25 files changed, 1231 insertions(+), 183 deletions(-)
 rename app/res/{raw-de => raw-de-rAT}/default_accounts.gnucash (100%)
 create mode 100644 app/res/raw-de-rDE/default_accounts.gnucash

diff --git a/app/res/menu/account_actions.xml b/app/res/menu/account_actions.xml
index 54cd6479..bbe9fe60 100644
--- a/app/res/menu/account_actions.xml
+++ b/app/res/menu/account_actions.xml
@@ -20,15 +20,17 @@
           android:icon="@drawable/content_new_holo_dark"
           android:title="@string/title_add_account"
           android:showAsAction="always"/>
-    
-        <item android:id="@+id/menu_export"
-          android:icon="@drawable/content_import_export_holo_light"
-          android:title="@string/menu_export_transactions"
-          android:showAsAction="never"
-          android:orderInCategory="3"/>
 
     <item android:id="@+id/menu_recurring_transactions"
-          android:title="Recurring Transactions"
+          android:title="@string/menu_item_recurring_transactions"
           android:showAsAction="never|withText"
           android:orderInCategory="4" />
+
+    <item android:id="@+id/menu_export"
+          android:icon="@drawable/content_import_export_holo_light"
+          android:title="@string/menu_export_transactions"
+          android:showAsAction="never"
+          android:orderInCategory="5"/>
+
+
 </menu>
\ No newline at end of file
diff --git a/app/res/raw-de/default_accounts.gnucash b/app/res/raw-de-rAT/default_accounts.gnucash
similarity index 100%
rename from app/res/raw-de/default_accounts.gnucash
rename to app/res/raw-de-rAT/default_accounts.gnucash
diff --git a/app/res/raw-de-rDE/default_accounts.gnucash b/app/res/raw-de-rDE/default_accounts.gnucash
new file mode 100644
index 00000000..eb2ff7c1
--- /dev/null
+++ b/app/res/raw-de-rDE/default_accounts.gnucash
@@ -0,0 +1,937 @@
+<?xml version="1.0" encoding="utf-8" ?>
+<gnc-v2
+     xmlns:gnc="http://www.gnucash.org/XML/gnc"
+     xmlns:act="http://www.gnucash.org/XML/act"
+     xmlns:book="http://www.gnucash.org/XML/book"
+     xmlns:cd="http://www.gnucash.org/XML/cd"
+     xmlns:cmdty="http://www.gnucash.org/XML/cmdty"
+     xmlns:price="http://www.gnucash.org/XML/price"
+     xmlns:slot="http://www.gnucash.org/XML/slot"
+     xmlns:split="http://www.gnucash.org/XML/split"
+     xmlns:sx="http://www.gnucash.org/XML/sx"
+     xmlns:trn="http://www.gnucash.org/XML/trn"
+     xmlns:ts="http://www.gnucash.org/XML/ts"
+     xmlns:fs="http://www.gnucash.org/XML/fs"
+     xmlns:bgt="http://www.gnucash.org/XML/bgt"
+     xmlns:recurrence="http://www.gnucash.org/XML/recurrence"
+     xmlns:lot="http://www.gnucash.org/XML/lot"
+     xmlns:addr="http://www.gnucash.org/XML/addr"
+     xmlns:owner="http://www.gnucash.org/XML/owner"
+     xmlns:billterm="http://www.gnucash.org/XML/billterm"
+     xmlns:bt-days="http://www.gnucash.org/XML/bt-days"
+     xmlns:bt-prox="http://www.gnucash.org/XML/bt-prox"
+     xmlns:cust="http://www.gnucash.org/XML/cust"
+     xmlns:employee="http://www.gnucash.org/XML/employee"
+     xmlns:entry="http://www.gnucash.org/XML/entry"
+     xmlns:invoice="http://www.gnucash.org/XML/invoice"
+     xmlns:job="http://www.gnucash.org/XML/job"
+     xmlns:order="http://www.gnucash.org/XML/order"
+     xmlns:taxtable="http://www.gnucash.org/XML/taxtable"
+     xmlns:tte="http://www.gnucash.org/XML/tte"
+     xmlns:vendor="http://www.gnucash.org/XML/vendor">
+<gnc:count-data cd:type="commodity">1</gnc:count-data>
+<gnc:count-data cd:type="account">64</gnc:count-data>
+<gnc:commodity version="2.0.0">
+  <cmdty:space>ISO4217</cmdty:space>
+  <cmdty:id>EUR</cmdty:id>
+  <cmdty:get_quotes/>
+  <cmdty:quote_source>currency</cmdty:quote_source>
+  <cmdty:quote_tz/>
+</gnc:commodity>
+<gnc:commodity version="2.0.0">
+  <cmdty:space>template</cmdty:space>
+  <cmdty:id>template</cmdty:id>
+  <cmdty:name>template</cmdty:name>
+  <cmdty:xcode>template</cmdty:xcode>
+  <cmdty:fraction>1</cmdty:fraction>
+</gnc:commodity>
+<gnc:account version="2.0.0">
+  <act:name>Root Account</act:name>
+  <act:id type="guid">3f929f1b1e6b465511039499090d73c5</act:id>
+  <act:type>ROOT</act:type>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Aktiva</act:name>
+  <act:id type="guid">bb6283955ae5656075b24063dc1676cb</act:id>
+  <act:type>ASSET</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Aktiva</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+    <slot>
+      <slot:key>color</slot:key>
+      <slot:value type="string">#1469EB</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">3f929f1b1e6b465511039499090d73c5</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Barvermgen</act:name>
+  <act:id type="guid">506ae10d76ccdf86937d7f0daeb5f571</act:id>
+  <act:type>ASSET</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Barvermgen</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">bb6283955ae5656075b24063dc1676cb</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Girokonto</act:name>
+  <act:id type="guid">5552c0109c5d81e33b77b6e81e8fcddd</act:id>
+  <act:type>BANK</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Girokonto</act:description>
+  <act:parent type="guid">506ae10d76ccdf86937d7f0daeb5f571</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sparkonto</act:name>
+  <act:id type="guid">395382d69974593064920ee8360bb980</act:id>
+  <act:type>BANK</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sparkonto</act:description>
+  <act:parent type="guid">506ae10d76ccdf86937d7f0daeb5f571</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Bargeld</act:name>
+  <act:id type="guid">ec82b8b6f9804d11d6e5d73288882ed9</act:id>
+  <act:type>CASH</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Bargeld</act:description>
+  <act:parent type="guid">506ae10d76ccdf86937d7f0daeb5f571</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Fremdkapital</act:name>
+  <act:id type="guid">59f1baba8f40efd334098ab3bb2576ab</act:id>
+  <act:type>LIABILITY</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>alle Verbindlichkeiten</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+    <slot>
+      <slot:key>color</slot:key>
+      <slot:value type="string">#B304AD</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">3f929f1b1e6b465511039499090d73c5</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Barverbindlichkeiten</act:name>
+  <act:id type="guid">49daf44dca0ab7c06d88bea1f0c0f95f</act:id>
+  <act:type>LIABILITY</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Barverbindlichkeiten (noch offenstehende Rechnungen)</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">59f1baba8f40efd334098ab3bb2576ab</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Kreditkarte</act:name>
+  <act:id type="guid">d76e56c4846eb1050701a7d03c0276ac</act:id>
+  <act:type>CREDIT</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Kreditkarte</act:description>
+  <act:parent type="guid">49daf44dca0ab7c06d88bea1f0c0f95f</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Ertrge</act:name>
+  <act:id type="guid">fe0561366e2910da979c59c5076a49d2</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Ertrge</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+    <slot>
+      <slot:key>color</slot:key>
+      <slot:value type="string">#319D67</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">3f929f1b1e6b465511039499090d73c5</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Gehalt</act:name>
+  <act:id type="guid">14a86987d0fc5f26ac2cb261618df0c7</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Gehalt und Zulagen</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">fe0561366e2910da979c59c5076a49d2</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Gehalt</act:name>
+  <act:id type="guid">a4c31f68479cc0a170af4c07056e8112</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Gehalt</act:description>
+  <act:parent type="guid">14a86987d0fc5f26ac2cb261618df0c7</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Zulagen</act:name>
+  <act:id type="guid">6c4f5490ab74de015d49de590b07836f</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Zulagen und Bonus zum Gehalt</act:description>
+  <act:parent type="guid">14a86987d0fc5f26ac2cb261618df0c7</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Geschenke</act:name>
+  <act:id type="guid">c1dbbbdcc5c85c6de7c5ccf95ba0222c</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Empfangene Geschenke</act:description>
+  <act:parent type="guid">fe0561366e2910da979c59c5076a49d2</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sonstiges</act:name>
+  <act:id type="guid">e500acdffc4ee7fb15ee9f91398d2e80</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sonstige Ertrge</act:description>
+  <act:parent type="guid">fe0561366e2910da979c59c5076a49d2</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Zinsen</act:name>
+  <act:id type="guid">afe7dd6e79c7f6672b23a49af8e49bac</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Zinseinkommen</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">fe0561366e2910da979c59c5076a49d2</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Girokonto</act:name>
+  <act:id type="guid">2b6835e0f432520e17f1865e43e2be7a</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Girokonto Zinsen</act:description>
+  <act:parent type="guid">afe7dd6e79c7f6672b23a49af8e49bac</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sonstige</act:name>
+  <act:id type="guid">92367d2b0fa0778a213d48f946e5abab</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sonstige Zinsen</act:description>
+  <act:parent type="guid">afe7dd6e79c7f6672b23a49af8e49bac</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sparkonto</act:name>
+  <act:id type="guid">e6f3ee5b458744f695bd860789597c9a</act:id>
+  <act:type>INCOME</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sparkonto Zinsen</act:description>
+  <act:parent type="guid">afe7dd6e79c7f6672b23a49af8e49bac</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Aufwendungen</act:name>
+  <act:id type="guid">ffa641d7627742e69687ae8bd7018e4e</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Aufwendungen</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+    <slot>
+      <slot:key>color</slot:key>
+      <slot:value type="string">#D13E29</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">3f929f1b1e6b465511039499090d73c5</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Bildung</act:name>
+  <act:id type="guid">563e690eff6bda293af526a006f1194e</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Bildung</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Abonnements</act:name>
+  <act:id type="guid">290d2b6e7d88faca102c7ac4c4030132</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Abonnements</act:description>
+  <act:parent type="guid">563e690eff6bda293af526a006f1194e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Bcher</act:name>
+  <act:id type="guid">eacf76f23223f82730927f3ac7186f03</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Bcher</act:description>
+  <act:parent type="guid">563e690eff6bda293af526a006f1194e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Broartikel</act:name>
+  <act:id type="guid">49ed449d4d977cecefa97cdcf1066373</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Broartikel</act:description>
+  <act:parent type="guid">563e690eff6bda293af526a006f1194e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Zeitungen</act:name>
+  <act:id type="guid">3a6af0fdb8595a0c40dbea382a0ae1a7</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Zeitungen</act:description>
+  <act:parent type="guid">563e690eff6bda293af526a006f1194e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Computer</act:name>
+  <act:id type="guid">2966daddaab685f16c694d84e6572d07</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Computer</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Fahrtkosten</act:name>
+  <act:id type="guid">0eba091fb6c839b139915da94e41c436</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Fahrtkosten</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Fahrkarten</act:name>
+  <act:id type="guid">cfef57480ebbec97a1be62a46008a8fc</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Fahrkarten Bus, Bahn, Flugzeug</act:description>
+  <act:parent type="guid">0eba091fb6c839b139915da94e41c436</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Geschenke</act:name>
+  <act:id type="guid">d0d91e0c938d91654ff3556affc139eb</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Geschenke</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Hobbies</act:name>
+  <act:id type="guid">4247f9ed713922a57922f682b48caedb</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Hobbies</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Kleidung</act:name>
+  <act:id type="guid">ef1d7ea3b2e4f61c9be55947c71b9151</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Kleidung</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Lebensmittel</act:name>
+  <act:id type="guid">38d3e070b0e2bd51bb6755484aa9ca85</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Lebensmittel</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Medikamente</act:name>
+  <act:id type="guid">fbc213b7469530ffc6fa8e65539b2c4d</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Medikamente</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sonstiges</act:name>
+  <act:id type="guid">0390c0ec401d77582e8b8997a67f4138</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sonstiges</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Bankgebhren</act:name>
+  <act:id type="guid">8149f9f52234d5c07c2c156d05ac6bb3</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Konto- und Bankgebhren</act:description>
+  <act:parent type="guid">0390c0ec401d77582e8b8997a67f4138</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sonstiges</act:name>
+  <act:id type="guid">b2374ec9c7a86e218fbe3152c9117c64</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>nicht aufgegliederte Ausgaben</act:description>
+  <act:parent type="guid">0390c0ec401d77582e8b8997a67f4138</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Spenden</act:name>
+  <act:id type="guid">7b5425586aea52ce0a7aac120c5e3af9</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Wohlttige Spenden</act:description>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Steuern</act:name>
+  <act:id type="guid">008681ff038780e248d4b54447d5f7db</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Steuern und Sozialabgaben</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Einkommenssteuer</act:name>
+  <act:id type="guid">27bf8a087690bff2ad8f9c4369213293</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Einkommenssteuer</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Pflegeversicherung</act:name>
+  <act:id type="guid">cad7aeba8266854070e9abdeb120a73d</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Pflegeversicherung</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Rentenversicherung</act:name>
+  <act:id type="guid">6c9c7f7dac3354fcde65cf7bbd9e2c51</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Rentenversicherung</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Solidarzuschlag</act:name>
+  <act:id type="guid">033765ac68f31a08e844baf3c859d626</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Solidarzuschlag</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sonstige</act:name>
+  <act:id type="guid">1fcbd312f9c76e1b8a7ee5a5cdeb9c89</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sonstige Steuern</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sozialabgaben</act:name>
+  <act:id type="guid">41f379aef9e82583079e0f431b21c5e4</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sonstige Sozialabgaben</act:description>
+  <act:parent type="guid">008681ff038780e248d4b54447d5f7db</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Telekommunikation</act:name>
+  <act:id type="guid">61aaa0927d60049e8d8af14b8bc9caa3</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Telekommunikation</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Fernsehen</act:name>
+  <act:id type="guid">54f22dcc8d2700b12afeb5159f6a9569</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>GEZ und Kabelfernsehen</act:description>
+  <act:parent type="guid">61aaa0927d60049e8d8af14b8bc9caa3</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Online-Dienste</act:name>
+  <act:id type="guid">9172576b59d1299931a1c9cb84a2743c</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Online-Dienste</act:description>
+  <act:parent type="guid">61aaa0927d60049e8d8af14b8bc9caa3</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Telefon</act:name>
+  <act:id type="guid">c22fa6bba735490c8eb4107a83b2c71f</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Telefon</act:description>
+  <act:parent type="guid">61aaa0927d60049e8d8af14b8bc9caa3</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Unterhaltung</act:name>
+  <act:id type="guid">601efb35975bce5cca6278a6825e2339</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Unterhaltung</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Ausgehen</act:name>
+  <act:id type="guid">1b96fd879ce1727c556976c57977aeed</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Auswrts Essen</act:description>
+  <act:parent type="guid">601efb35975bce5cca6278a6825e2339</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Musik/Kino</act:name>
+  <act:id type="guid">1f7e3b0e07787cf8a1ee85fa833da225</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Musik/Kino</act:description>
+  <act:parent type="guid">601efb35975bce5cca6278a6825e2339</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Reisen</act:name>
+  <act:id type="guid">a02d8f04599bdf6f22730fed7e841664</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Reisen</act:description>
+  <act:parent type="guid">601efb35975bce5cca6278a6825e2339</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Sport</act:name>
+  <act:id type="guid">8131201ef42debd456438934eeaf5c6d</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Sport</act:description>
+  <act:parent type="guid">601efb35975bce5cca6278a6825e2339</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Versicherungen</act:name>
+  <act:id type="guid">ae19542498b7869b10996934e7e76043</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Versicherungen</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Haftpflicht</act:name>
+  <act:id type="guid">a3c4edbdb87bb445254ee177aba3ef5c</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Haftpflichtversicherung</act:description>
+  <act:parent type="guid">ae19542498b7869b10996934e7e76043</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Krankenversicherung</act:name>
+  <act:id type="guid">022087cc16c7115bdfcfec1e11f4e806</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Krankenversicherung</act:description>
+  <act:parent type="guid">ae19542498b7869b10996934e7e76043</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Wohnen</act:name>
+  <act:id type="guid">bafbda77fb0c330593c1b767fcd493ad</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Ausgaben fr Wohnung/Haus</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">ffa641d7627742e69687ae8bd7018e4e</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Miete</act:name>
+  <act:id type="guid">56759e7bab7c34324bffa512e6fb21d8</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Miete</act:description>
+  <act:parent type="guid">bafbda77fb0c330593c1b767fcd493ad</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Nebenkosten</act:name>
+  <act:id type="guid">1e70f91bc100daab15a620cc03b3aa69</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Wohnnebenkosten</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>placeholder</slot:key>
+      <slot:value type="string">true</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">bafbda77fb0c330593c1b767fcd493ad</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Abfall</act:name>
+  <act:id type="guid">50d4150d98ec5c05beefdb7b07a88269</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Abfallentsorgung</act:description>
+  <act:parent type="guid">1e70f91bc100daab15a620cc03b3aa69</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Gas</act:name>
+  <act:id type="guid">837d03e3d8f7d3abe6b2f90606d5b6a7</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Gas</act:description>
+  <act:parent type="guid">1e70f91bc100daab15a620cc03b3aa69</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Strom</act:name>
+  <act:id type="guid">278057b6c44ebabcb8abe27f07fb89de</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Strom</act:description>
+  <act:parent type="guid">1e70f91bc100daab15a620cc03b3aa69</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Wasser</act:name>
+  <act:id type="guid">a082529a28f6b3f7ef97acf089b62708</act:id>
+  <act:type>EXPENSE</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Wasser</act:description>
+  <act:parent type="guid">1e70f91bc100daab15a620cc03b3aa69</act:parent>
+</gnc:account>
+<gnc:account version="2.0.0">
+  <act:name>Anfangsbestand</act:name>
+  <act:id type="guid">9adade15378180f6b2fc74b3519044fe</act:id>
+  <act:type>EQUITY</act:type>
+  <act:commodity>
+    <cmdty:space>ISO4217</cmdty:space>
+    <cmdty:id>EUR</cmdty:id>
+  </act:commodity>
+  <act:commodity-scu>100</act:commodity-scu>
+  <act:description>Anfangsbestand</act:description>
+  <act:slots>
+    <slot>
+      <slot:key>color</slot:key>
+      <slot:value type="string">#EE8600</slot:value>
+    </slot>
+  </act:slots>
+  <act:parent type="guid">3f929f1b1e6b465511039499090d73c5</act:parent>
+</gnc:account>
+</gnc-v2>
+
+<!-- Local variables: -->
+<!-- mode: xml        -->
+<!-- End:             -->
diff --git a/app/res/values-de/strings.xml b/app/res/values-de/strings.xml
index 63ad0b01..b12a249a 100644
--- a/app/res/values-de/strings.xml
+++ b/app/res/values-de/strings.xml
@@ -316,42 +316,40 @@
     </string>
 	<string name="label_dismiss">Schlieen</string>
     <string name="toast_transanction_amount_required">Geben Sie einen Betrag ein um die Buchung speichern zu knnen</string>
-    <string name="menu_import_accounts">Import GnuCash Accounts</string>
-    <string name="btn_import_accounts">Import Accounts</string>
-    <string name="toast_error_importing_accounts">An error occurred while importing the GnuCash accounts</string>
-    <string name="toast_success_importing_accounts">GnuCash Accounts successfully imported</string>
+    <string name="menu_import_accounts">GnuCash Konten importieren</string>
+    <string name="btn_import_accounts">Konten importieren</string>
+    <string name="toast_error_importing_accounts">Beim importieren von den GnuCash Konten ist einen Fehler aufgetreten!</string>
+    <string name="toast_success_importing_accounts">GnuCash Konten wurden erfolgreich importiert</string>
     <string name="summary_import_accounts">Import account structure exported from GnuCash desktop</string>
-    <string name="title_import_accounts">Import GnuCash accounts</string>
-    <string name="summary_delete_all_accounts">Delete all accounts in the database. All transactions will be deleted as
-        well.
+    <string name="title_import_accounts">GnuCash Konten importieren</string>
+    <string name="summary_delete_all_accounts">Alle Konten lschen. Alle Buchungen werden ebenfalls gelscht!</string>
+    <string name="title_delete_all_accounts">Alle Konten lschen</string>
+    <string name="header_account_settings">Konten</string>
+    <string name="toast_all_accounts_deleted">Alle Konten wurden erfolgreich gelscht</string>
+    <string name="confirm_delete_all_accounts">Wollen Sie wirklich ALLE Konten und Buchungen lschen?
+        \n\nDiese Operation kann nicht rckgngig gemacht werden!
     </string>
-    <string name="title_delete_all_accounts">Delete all accounts</string>
-    <string name="header_account_settings">Accounts</string>
-    <string name="toast_all_accounts_deleted">All accounts have been successfully deleted</string>
-    <string name="confirm_delete_all_accounts">Are you sure you want to delete all accounts and transactions? \nThis
-        operation cannot be undone!
-    </string>
-    <string name="label_account_type">Account Type</string>
-    <string name="summary_delete_all_transactions">All transactions in all accounts will be deleted!</string>
-    <string name="title_delete_all_transactions">Delete all transactions</string>
-    <string name="toast_all_transactions_deleted">All transactions successfully deleted!</string>
+    <string name="label_account_type">Kontoart</string>
+    <string name="summary_delete_all_transactions">Alle Buchungen in alle Konten werden gelscht</string>
+    <string name="title_delete_all_transactions">Alle Buchungen lschen</string>
+    <string name="toast_all_transactions_deleted">Alle Buchungen wurden erfolgreich gelscht</string>
     <string name="title_progress_importing_accounts">Importing accounts</string>
     <string name="toast_tap_again_to_confirm_delete">Tap again to confirm. ALL entries will be deleted!!</string>
-    <string name="section_header_transactions">Transactions</string>
-    <string name="section_header_subaccounts">Sub-Accounts</string>
-    <string name="menu_search_accounts">Search</string>
-    <string name="title_default_export_format">Default Export Format</string>
+    <string name="section_header_transactions">Buchungen</string>
+    <string name="section_header_subaccounts">Unterkonten</string>
+    <string name="menu_search_accounts">Suchen</string>
+    <string name="title_default_export_format">Standard Export Format</string>
     <string name="summary_default_export_format">File format to use by default when exporting transactions</string>
-    <string name="menu_export_transactions">Export transactions</string>
+    <string name="menu_export_transactions">Buchungen exportieren</string>
     <string name="label_recurring_transaction">Recurrence</string>
     <!-- This should be the same name used by GnuCash desktop for imbalance accounts -->
     <string name="imbalance_account_name">Ausgleichskonto</string>
-    <string name="title_progress_exporting_transactions">Exporting transactions</string>
-    <string name="label_no_recurring_transactions">No recurring transactions to display.</string>
-    <string name="toast_recurring_transaction_deleted">Successfully deleted recurring transaction</string>
-    <string name="label_placeholder_account">Placeholder account</string>
-    <string name="label_default_transfer_account">Default Transfer Account</string>
-    <string name="label_account_color_and_type">Account Color &amp; Type</string>
+    <string name="title_progress_exporting_transactions">Die Buchungen werden exportiert</string>
+    <string name="label_no_recurring_transactions">Keine wiederkehrende Buchungen vorhanden</string>
+    <string name="toast_recurring_transaction_deleted">Die wiederkehrende Buchung wurde erfolgreich gelscht</string>
+    <string name="label_placeholder_account">Platzhalter Konto</string>
+    <string name="label_default_transfer_account">Standard berweisungskonto</string>
+    <string name="label_account_color_and_type">Kontofarbe &amp; -art</string>
     <plurals name="label_sub_accounts">
         <item quantity="one">%d Unterkonto</item>
         <item quantity="other">%d Unterkonten</item>
@@ -376,11 +374,15 @@
         <item>OFX</item>
     </string-array>
     <!-- Default title for color picker dialog [CHAR LIMIT=30] -->
-    <string name="color_picker_default_title">Select a Color</string>
-    <string name="label_delete_sub_accounts">Delete sub-accounts</string>
-    <string name="title_recent_accounts">Recent</string>
-    <string name="title_favorite_accounts">Favorites</string>
-    <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
-    <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="color_picker_default_title">Farbe auswhlen</string>
+    <string name="label_delete_sub_accounts">Unterkonten lschen</string>
+    <string name="title_recent_accounts">Krzlich</string>
+    <string name="title_favorite_accounts">Favoriten</string>
+    <string name="title_all_accounts">Alle</string>
+    <string name="summary_create_default_accounts">Erstellt die hufig verwendete standard GnuCash Konten</string>
+    <string name="title_create_default_accounts">Standard Konten erstellen</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Wiederkehrende Buchungen</string>
 </resources>
\ No newline at end of file
diff --git a/app/res/values-el/strings.xml b/app/res/values-el/strings.xml
index c58c5250..00ac5a36 100644
--- a/app/res/values-el/strings.xml
+++ b/app/res/values-el/strings.xml
@@ -395,6 +395,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-es-rMX/strings.xml b/app/res/values-es-rMX/strings.xml
index 58e5a4b0..5fffe80f 100644
--- a/app/res/values-es-rMX/strings.xml
+++ b/app/res/values-es-rMX/strings.xml
@@ -379,6 +379,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-es/strings.xml b/app/res/values-es/strings.xml
index b27c9b8d..b9e022aa 100644
--- a/app/res/values-es/strings.xml
+++ b/app/res/values-es/strings.xml
@@ -379,6 +379,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-fr/strings.xml b/app/res/values-fr/strings.xml
index c9c807bd..fd6fffd9 100644
--- a/app/res/values-fr/strings.xml
+++ b/app/res/values-fr/strings.xml
@@ -377,6 +377,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
\ No newline at end of file
diff --git a/app/res/values-hu/strings.xml b/app/res/values-hu/strings.xml
index 5d06bad7..74110e4d 100644
--- a/app/res/values-hu/strings.xml
+++ b/app/res/values-hu/strings.xml
@@ -380,6 +380,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
\ No newline at end of file
diff --git a/app/res/values-it/strings.xml b/app/res/values-it/strings.xml
index f6243415..ebb2f657 100644
--- a/app/res/values-it/strings.xml
+++ b/app/res/values-it/strings.xml
@@ -380,6 +380,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-nb/strings.xml b/app/res/values-nb/strings.xml
index 4876942f..c7bcb29d 100644
--- a/app/res/values-nb/strings.xml
+++ b/app/res/values-nb/strings.xml
@@ -382,6 +382,10 @@ format og importeres i regnskapsprogrammet GnuCash for PC.</string>
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-nl/strings.xml b/app/res/values-nl/strings.xml
index 467a981b..9c1eec8c 100644
--- a/app/res/values-nl/strings.xml
+++ b/app/res/values-nl/strings.xml
@@ -381,6 +381,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-pt-rBR/strings.xml b/app/res/values-pt-rBR/strings.xml
index 7dc3df5b..3230b66d 100644
--- a/app/res/values-pt-rBR/strings.xml
+++ b/app/res/values-pt-rBR/strings.xml
@@ -379,6 +379,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-ru/strings.xml b/app/res/values-ru/strings.xml
index 434369ca..d85fccda 100644
--- a/app/res/values-ru/strings.xml
+++ b/app/res/values-ru/strings.xml
@@ -377,6 +377,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values-zh/strings.xml b/app/res/values-zh/strings.xml
index 2b37e469..aae41e9d 100644
--- a/app/res/values-zh/strings.xml
+++ b/app/res/values-zh/strings.xml
@@ -377,6 +377,10 @@
     <string name="title_recent_accounts">Recent</string>
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/res/values/strings.xml b/app/res/values/strings.xml
index ef1163b5..c889147d 100644
--- a/app/res/values/strings.xml
+++ b/app/res/values/strings.xml
@@ -523,7 +523,7 @@
     <string name="title_delete_all_accounts">Delete all accounts</string>
     <string name="header_account_settings">Accounts</string>
     <string name="toast_all_accounts_deleted">All accounts have been successfully deleted</string>
-    <string name="confirm_delete_all_accounts">Are you sure you want to delete all accounts and transactions? \nThis
+    <string name="confirm_delete_all_accounts">Are you sure you want to delete all accounts and transactions? \n\nThis
         operation cannot be undone!
     </string>
     <string name="label_account_type">Account Type</string>
@@ -539,7 +539,7 @@
     <string name="title_default_export_format">Default Export Format</string>
     <string name="key_default_export_format">default_export_format</string>
     <string name="summary_default_export_format">File format to use by default when exporting transactions</string>
-    <string name="menu_export_transactions">Export transactions...</string>
+    <string name="menu_export_transactions">Export transactions</string>
     <string name="label_recurring_transaction">Recurrence</string>
     <!-- This should be the same name used by GnuCash desktop for imbalance accounts -->
     <string name="imbalance_account_name">Imbalance</string>
@@ -615,6 +615,10 @@
     <string name="title_favorite_accounts">Favorites</string>
     <string name="title_all_accounts">All</string>
     <string name="key_create_default_accounts">create_default_accounts</string>
-    <string name="summary_create_default_accounts">Creates default GnuCash account structure. All current accounts (and transactions) will be deleted!</string>
+    <string name="summary_create_default_accounts">Creates default GnuCash commonly-used account structure</string>
     <string name="title_create_default_accounts">Create default accounts</string>
+    <string name="message_create_default_accounts_confirmation">New accounts will be created in addition to the existing
+        account structure.\n\nIf you wish to replace currently existing accounts, delete them first before proceeding!
+    </string>
+    <string name="menu_item_recurring_transactions">Recurring Transactions</string>
 </resources>
diff --git a/app/src/org/gnucash/android/data/Account.java b/app/src/org/gnucash/android/data/Account.java
index dd6e053e..6e4a6e8d 100644
--- a/app/src/org/gnucash/android/data/Account.java
+++ b/app/src/org/gnucash/android/data/Account.java
@@ -20,6 +20,7 @@
 import org.gnucash.android.db.AccountsDbAdapter;
 import org.gnucash.android.export.ofx.OfxExporter;
 import org.gnucash.android.export.qif.QifHelper;
+import org.gnucash.android.data.Transaction.TransactionType;
 import org.w3c.dom.Document;
 import org.w3c.dom.Element;
 
@@ -70,34 +71,43 @@
 	 * they are currently not used except for exporting
 	 */
 	public enum AccountType {
-        CASH, BANK, CREDIT, ASSET(true), LIABILITY, INCOME, EXPENSE(true),
-        PAYABLE, RECEIVABLE, EQUITY, CURRENCY, STOCK, MUTUAL, ROOT;
+        CASH(TransactionType.DEBIT), BANK, CREDIT, ASSET(TransactionType.DEBIT), LIABILITY, INCOME,
+        EXPENSE(TransactionType.DEBIT), PAYABLE, RECEIVABLE, EQUITY, CURRENCY, STOCK, MUTUAL, ROOT;
 
         /**
-         * Indicates that this type of account has an inverted state for credits and debits.
-         * Credits decrease the account balance, while debits increase it.
+         * Indicates that this type of normal balance the account type has
+         * <p>To increase the value of an account with normal balance of credit, one would credit the account.
+         * To increase the value of an account with normal balance of debit, one would likewise debit the account.</p>
          */
-        private boolean mInvertedCredit = false;
+        private TransactionType mNormalBalance = TransactionType.CREDIT;
 
-        private AccountType(boolean invertedCredit){
-            mInvertedCredit = invertedCredit;
+        private AccountType(TransactionType normalBalance){
+            this.mNormalBalance = normalBalance;
         }
 
         private AccountType() {
             //nothing to see here, move along
         }
 
-        public boolean hasInvertedCredit(){
-            return mInvertedCredit;
+        public boolean hasDebitNormalBalance(){
+            return mNormalBalance == TransactionType.DEBIT;
         }
-    };
+
+        /**
+         * Returns the type of normal balance this account possesses
+         * @return TransactionType balance of the account type
+         */
+        public TransactionType getNormalBalanceType(){
+            return mNormalBalance;
+        }
+    }
 
     /**
      * Accounts types which are used by the OFX standard
      */
-	public enum OfxAccountType {CHECKING, SAVINGS, MONEYMRKT, CREDITLINE };
-		
-	/**
+	public enum OfxAccountType {CHECKING, SAVINGS, MONEYMRKT, CREDITLINE }
+
+    /**
 	 * Unique Identifier of the account
 	 * It is generated when the account is created and can be set a posteriori as well
 	 */
diff --git a/app/src/org/gnucash/android/db/AccountsDbAdapter.java b/app/src/org/gnucash/android/db/AccountsDbAdapter.java
index 1cd306ac..a928f431 100644
--- a/app/src/org/gnucash/android/db/AccountsDbAdapter.java
+++ b/app/src/org/gnucash/android/db/AccountsDbAdapter.java
@@ -360,16 +360,7 @@ public String getAccountColorCode(long accountId){
 	 * @return {@link AccountType} of the account
 	 */
 	public AccountType getAccountType(String uid){
-		String type = null;
-		Cursor c = mDb.query(DatabaseHelper.ACCOUNTS_TABLE_NAME, 
-				new String[]{DatabaseHelper.KEY_TYPE}, 
-				DatabaseHelper.KEY_UID + "='" + uid + "'", 
-				null, null, null, null);
-		if (c != null && c.moveToFirst()){
-			type = c.getString(0); //0 because we requested only the type column
-			c.close();
-		}
-		return AccountType.valueOf(type);
+        return mTransactionsAdapter.getAccountType(uid);
 	}
 
     /**
@@ -562,7 +553,7 @@ public Cursor fetchTopLevelAccounts(){
     public Cursor fetchRecentAccounts(int numberOfRecents){
         Cursor recentTxCursor = mDb.query(true, DatabaseHelper.TRANSACTIONS_TABLE_NAME,
                 new String[]{DatabaseHelper.KEY_ACCOUNT_UID},
-                null, null, null, null, DatabaseHelper.KEY_TIMESTAMP, Integer.toString(numberOfRecents));
+                null, null, null, null, DatabaseHelper.KEY_TIMESTAMP + " DESC", Integer.toString(numberOfRecents));
         StringBuilder recentAccountUIDs = new StringBuilder("(");
         while (recentTxCursor.moveToNext()){
             String uid = recentTxCursor.getString(recentTxCursor.getColumnIndexOrThrow(DatabaseHelper.KEY_ACCOUNT_UID));
@@ -698,6 +689,9 @@ public String getCurrencyCode(String accountUID){
      * @see #getFullyQualifiedAccountName(String)
      */
     public String getAccountName(String accountUID){
+        if (accountUID == null)
+            return null;
+
         Cursor cursor = mDb.query(DatabaseHelper.ACCOUNTS_TABLE_NAME,
                 new String[]{DatabaseHelper.KEY_ROW_ID, DatabaseHelper.KEY_NAME},
                 DatabaseHelper.KEY_UID + " = ?",
diff --git a/app/src/org/gnucash/android/db/TransactionsDbAdapter.java b/app/src/org/gnucash/android/db/TransactionsDbAdapter.java
index ac44ebe4..ed9c1fd5 100644
--- a/app/src/org/gnucash/android/db/TransactionsDbAdapter.java
+++ b/app/src/org/gnucash/android/db/TransactionsDbAdapter.java
@@ -16,21 +16,19 @@
 
 package org.gnucash.android.db;
 
-import java.math.BigDecimal;
-import java.util.ArrayList;
-import java.util.Currency;
-import java.util.List;
-
-import com.sun.swing.internal.plaf.metal.resources.metal_pt_BR;
-import org.gnucash.android.data.Account;
-import org.gnucash.android.data.Money;
-import org.gnucash.android.data.Transaction;
-
 import android.content.ContentValues;
 import android.content.Context;
 import android.database.Cursor;
 import android.database.sqlite.SQLiteStatement;
 import android.util.Log;
+import org.gnucash.android.data.Account;
+import org.gnucash.android.data.Money;
+import org.gnucash.android.data.Transaction;
+
+import java.math.BigDecimal;
+import java.util.ArrayList;
+import java.util.Currency;
+import java.util.List;
 
 /**
  * Manages persistence of {@link Transaction}s in the database
@@ -108,11 +106,11 @@ public long fetchTransactionWithUID(String uid){
 	 * @return {@link Transaction} object corresponding to database record
 	 */
 	public Transaction getTransaction(long rowId){
-		Transaction transaction = null;
 		if (rowId <= 0)
-			return transaction;
+			return null;
 		
 		Log.v(TAG, "Fetching transaction with id " + rowId);
+        Transaction transaction = null;
 		Cursor c =	fetchRecord(DatabaseHelper.TRANSACTIONS_TABLE_NAME, rowId);
 		if (c != null && c.moveToFirst()){
 			transaction = buildTransactionInstance(c);			
@@ -214,7 +212,8 @@ public Transaction buildTransactionInstance(Cursor c){
 		transaction.setExported(c.getInt(DatabaseAdapter.COLUMN_EXPORTED) == 1);
 		transaction.setDoubleEntryAccountUID(doubleAccountUID);
         transaction.setRecurrencePeriod(recurrencePeriod);
-		
+		transaction.setTransactionType(Transaction.TransactionType.valueOf(c.getString(DatabaseAdapter.COLUMN_TYPE)));
+
 		return transaction;
 	}
 
@@ -325,8 +324,7 @@ public int getTransactionsCount(long accountId){
 	public long getAllTransactionsCount(){
 		String sql = "SELECT COUNT(*) FROM " + DatabaseHelper.TRANSACTIONS_TABLE_NAME;		
 		SQLiteStatement statement = mDb.compileStatement(sql);
-	    long count = statement.simpleQueryForLong();
-	    return count;
+        return statement.simpleQueryForLong();
 	}
 	
 	/**
@@ -336,6 +334,7 @@ public long getAllTransactionsCount(){
 	 * @return Sum of transactions belonging to the account
 	 */
 	public Money getTransactionsSum(long accountId){
+        //FIXME: Properly compute the balance while considering normal account balance
         String accountUID = getAccountUID(accountId);
 
         String querySum = "SELECT TOTAL(" + DatabaseHelper.KEY_AMOUNT
@@ -365,8 +364,7 @@ public Money getTransactionsSum(long accountId){
 
         BigDecimal sumDecimal = new BigDecimal(sum);
         Currency currency = Currency.getInstance(getCurrencyCode(accountUID));
-        Money transactionSum = new Money(sumDecimal, currency);
-        return transactionSum;
+        return new Money(sumDecimal, currency);
 	}
 	
 	/**
@@ -378,7 +376,25 @@ public Money getTransactionsSum(long accountId){
 	public boolean isSameAccount(long rowId, String accountUID){
 		return getAccountID(accountUID) == rowId;
 	}
-		
+
+    /**
+     * Returns the {@link Account.AccountType} of the account with unique ID <code>uid</code>
+     * @param accountUID Unique ID of the account
+     * @return {@link Account.AccountType} of the account
+     */
+    public Account.AccountType getAccountType(String accountUID){
+        String type = null;
+        Cursor c = mDb.query(DatabaseHelper.ACCOUNTS_TABLE_NAME,
+                new String[]{DatabaseHelper.KEY_TYPE},
+                DatabaseHelper.KEY_UID + "='" + accountUID + "'",
+                null, null, null, null);
+        if (c != null && c.moveToFirst()){
+            type = c.getString(c.getColumnIndexOrThrow(DatabaseHelper.KEY_TYPE));
+            c.close();
+        }
+        return Account.AccountType.valueOf(type);
+    }
+
 	/**
 	 * Marks an account record as exported
 	 * @param accountUID Unique ID of the record to be marked as exported
diff --git a/app/src/org/gnucash/android/ui/accounts/AccountsActivity.java b/app/src/org/gnucash/android/ui/accounts/AccountsActivity.java
index 62e0ed22..6c089bdc 100644
--- a/app/src/org/gnucash/android/ui/accounts/AccountsActivity.java
+++ b/app/src/org/gnucash/android/ui/accounts/AccountsActivity.java
@@ -261,6 +261,12 @@ private void init() {
         }
     }
 
+    @Override
+    protected void onResume() {
+        super.onResume();
+        TransactionsActivity.sLastTitleColor = -1;
+    }
+
     /**
 	 * Checks if the minor version has been increased and displays the What's New dialog box.
 	 * This is the minor version as per semantic versioning.
diff --git a/app/src/org/gnucash/android/ui/accounts/AccountsListFragment.java b/app/src/org/gnucash/android/ui/accounts/AccountsListFragment.java
index 9ca0ffba..2a27be03 100644
--- a/app/src/org/gnucash/android/ui/accounts/AccountsListFragment.java
+++ b/app/src/org/gnucash/android/ui/accounts/AccountsListFragment.java
@@ -37,7 +37,10 @@
 import android.support.v4.widget.SimpleCursorAdapter;
 import android.text.TextUtils;
 import android.util.Log;
-import android.view.*;
+import android.view.LayoutInflater;
+import android.view.TouchDelegate;
+import android.view.View;
+import android.view.ViewGroup;
 import android.widget.*;
 import android.widget.AdapterView.OnItemLongClickListener;
 import com.actionbarsherlock.app.ActionBar;
@@ -48,7 +51,6 @@
 import com.actionbarsherlock.view.Menu;
 import com.actionbarsherlock.view.MenuInflater;
 import com.actionbarsherlock.view.MenuItem;
-import com.viewpagerindicator.TitlePageIndicator;
 import org.gnucash.android.R;
 import org.gnucash.android.data.Account;
 import org.gnucash.android.data.Money;
@@ -772,14 +774,16 @@ public View getView(int position, View convertView, ViewGroup parent) {
             parentView.post(new Runnable() {
                 @Override
                 public void run() {
-                    final android.graphics.Rect hitRect = new Rect();
-                    float extraPadding = getResources().getDimension(R.dimen.edge_padding);
-                    addTransactionButton.getHitRect(hitRect);
-                    hitRect.right   += extraPadding;
-                    hitRect.bottom  += extraPadding;
-                    hitRect.top     -= extraPadding;
-                    hitRect.left    -= extraPadding;
-                    parentView.setTouchDelegate(new TouchDelegate(hitRect, addTransactionButton));
+                    if (isAdded()){ //may be run when fragment has been unbound from activity
+                        final android.graphics.Rect hitRect = new Rect();
+                        float extraPadding = getResources().getDimension(R.dimen.edge_padding);
+                        addTransactionButton.getHitRect(hitRect);
+                        hitRect.right   += extraPadding;
+                        hitRect.bottom  += extraPadding;
+                        hitRect.top     -= extraPadding;
+                        hitRect.left    -= extraPadding;
+                        parentView.setTouchDelegate(new TouchDelegate(hitRect, addTransactionButton));
+                    }
                 }
             });
 
diff --git a/app/src/org/gnucash/android/ui/settings/AccountPreferencesFragment.java b/app/src/org/gnucash/android/ui/settings/AccountPreferencesFragment.java
index d8f9c4cc..44d318b8 100644
--- a/app/src/org/gnucash/android/ui/settings/AccountPreferencesFragment.java
+++ b/app/src/org/gnucash/android/ui/settings/AccountPreferencesFragment.java
@@ -23,6 +23,7 @@
 import android.preference.Preference;
 import android.preference.PreferenceFragment;
 import android.preference.PreferenceManager;
+import android.view.ContextThemeWrapper;
 import com.actionbarsherlock.app.ActionBar;
 import com.actionbarsherlock.app.SherlockPreferenceActivity;
 import org.gnucash.android.R;
@@ -74,18 +75,17 @@ public boolean onPreferenceClick(Preference preference) {
             @Override
             public boolean onPreferenceClick(Preference preference) {
                 new AlertDialog.Builder(getActivity())
-                        .setTitle("Confirm")
-                        .setMessage("The new accounts will be created in addition to the existing account structure. " +
-                                "Any accounts with the same ID, they will simple be updated." +
-                                "If you wish to replace any currently existing accounts, delete them first before continuing this action!")
-                        .setPositiveButton("Create Accounts", new DialogInterface.OnClickListener() {
+                        .setTitle(R.string.title_create_default_accounts)
+                        .setMessage(R.string.message_create_default_accounts_confirmation)
+                        .setIcon(android.R.drawable.ic_dialog_alert)
+                        .setPositiveButton(R.string.btn_create_accounts, new DialogInterface.OnClickListener() {
                             @Override
                             public void onClick(DialogInterface dialogInterface, int i) {
                                 InputStream accountFileInputStream = getResources().openRawResource(R.raw.default_accounts);
                                 new AccountsActivity.AccountImporterTask(getActivity()).execute(accountFileInputStream);
                             }
                         })
-                        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
+                        .setNegativeButton(R.string.btn_cancel, new DialogInterface.OnClickListener() {
                             @Override
                             public void onClick(DialogInterface dialogInterface, int i) {
                                 dialogInterface.dismiss();
diff --git a/app/src/org/gnucash/android/ui/transactions/NewTransactionFragment.java b/app/src/org/gnucash/android/ui/transactions/NewTransactionFragment.java
index 9dd43748..f6b9ef05 100644
--- a/app/src/org/gnucash/android/ui/transactions/NewTransactionFragment.java
+++ b/app/src/org/gnucash/android/ui/transactions/NewTransactionFragment.java
@@ -255,20 +255,17 @@ public void onActivityCreated(Bundle savedInstanceState) {
 
     /**
      * Toggles the state transaction type button in response to the type of account.
+     * This just changes what label is shown to the user, but basically the button in checked state still
+     * represents a negative amount, and unchecked is positive. The CREDIT/DEBIT label depends on the account.
      * Different types of accounts handle CREDITS/DEBITS differently
      */
     private void toggleTransactionTypeState() {
-        switch (mAccountType) {
-            case ASSET:
-            case EXPENSE:
-                mTransactionTypeButton.setTextOff(getString(R.string.label_debit));
-                mTransactionTypeButton.setTextOn(getString(R.string.label_credit));
-                break;
-
-            default:
-                mTransactionTypeButton.setTextOff(getString(R.string.label_credit));
-                mTransactionTypeButton.setTextOn(getString(R.string.label_debit));
-                break;
+        if (mAccountType.hasDebitNormalBalance()){
+            mTransactionTypeButton.setTextOff(getString(R.string.label_debit));
+            mTransactionTypeButton.setTextOn(getString(R.string.label_credit));
+        } else {
+            mTransactionTypeButton.setTextOff(getString(R.string.label_credit));
+            mTransactionTypeButton.setTextOn(getString(R.string.label_debit));
         }
         mTransactionTypeButton.invalidate();
     }
@@ -321,7 +318,17 @@ public void onItemClick(AdapterView<?> adapterView, View view, int position, lon
 	 */
 	private void initializeViewsWithTransaction(){
 		mNameEditText.setText(mTransaction.getName());
-		mTransactionTypeButton.setChecked(mTransaction.getTransactionType() == TransactionType.DEBIT);
+
+        //FIXME: Better handle the different kinds of accounts and how transfers between the different types affect balance
+        //checking the type button means the amount will be shown as negative (in red) to user
+//        if (mAccountType.hasDebitNormalBalance()){
+//            mTransactionTypeButton.setChecked();
+//            mTransactionTypeButton.setChecked(mTransaction.getTransactionType() == TransactionType.CREDIT);
+//        }
+//        else {
+//            mTransactionTypeButton.setChecked(mTransaction.getTransactionType() == TransactionType.DEBIT);
+//        }
+        mTransactionTypeButton.setChecked(mTransaction.getTransactionType() == TransactionType.DEBIT);
 		if (!mAmountManuallyEdited){
             //when autocompleting, only change the amount if the user has not manually changed it already
             mAmountEditText.setText(mTransaction.getAmount().toPlainString());
@@ -363,12 +370,12 @@ private void initalizeViews() {
 
 		String typePref = PreferenceManager.getDefaultSharedPreferences(getActivity()).getString(getString(R.string.key_default_transaction_type), "DEBIT");
 		if (typePref.equals("CREDIT")){
-            if (mAccountType == Account.AccountType.ASSET || mAccountType == Account.AccountType.EXPENSE)
+            if (mAccountType.hasDebitNormalBalance())
                 mTransactionTypeButton.setChecked(false);
             else
                 mTransactionTypeButton.setChecked(true);
-		} else {
-            if (mAccountType == Account.AccountType.ASSET || mAccountType == Account.AccountType.EXPENSE)
+		} else { //DEBIT
+            if (mAccountType.hasDebitNormalBalance())
                 mTransactionTypeButton.setChecked(true);
             else
                 mTransactionTypeButton.setChecked(false);
@@ -541,7 +548,7 @@ public void onAccountChanged(long newAccountId){
         toggleTransactionTypeState();
 
         //if the new account has a different credit/debit philosophy as the previous one, then toggle the button
-        if (mAccountType.hasInvertedCredit() != previousAccountType.hasInvertedCredit()){
+        if (mAccountType.hasDebitNormalBalance() != previousAccountType.hasDebitNormalBalance()){
             mTransactionTypeButton.toggle();
         }
 
@@ -568,7 +575,7 @@ private void saveNewTransaction() {
 		Currency currency = Currency.getInstance(mTransactionsDbAdapter.getCurrencyCode(accountID));
 		Money amount 	= new Money(amountBigd, currency);
 		TransactionType type;
-        if (mAccountType.hasInvertedCredit()){
+        if (mAccountType.hasDebitNormalBalance()){
             type = amount.isNegative() ? TransactionType.CREDIT : TransactionType.DEBIT;
         } else
             type = amount.isNegative() ? TransactionType.DEBIT : TransactionType.CREDIT;
diff --git a/app/src/org/gnucash/android/ui/transactions/TransactionsActivity.java b/app/src/org/gnucash/android/ui/transactions/TransactionsActivity.java
index 2d03994b..ed5296d4 100644
--- a/app/src/org/gnucash/android/ui/transactions/TransactionsActivity.java
+++ b/app/src/org/gnucash/android/ui/transactions/TransactionsActivity.java
@@ -120,7 +120,7 @@
      * This is the last known color for the title indicator.
      * This is used to remember the color of the top level account if the child account doesn't have one.
      */
-    private static int sLastTitleColor;
+    public static int sLastTitleColor = -1;
 
     private TextView mSectionHeaderTransactions;
     private TitlePageIndicator mTitlePageIndicator;
@@ -273,6 +273,8 @@ protected void onCreate(Bundle savedInstanceState) {
         mTitlePageIndicator = (TitlePageIndicator) findViewById(R.id.titles);
         mSectionHeaderTransactions = (TextView) findViewById(R.id.section_header_transactions);
 
+        if (sLastTitleColor == -1) //if this is first launch of app. Previous launches would have set the color already
+            sLastTitleColor = getResources().getColor(R.color.title_green);
 
 		mAccountId = getIntent().getLongExtra(
                 TransactionsListFragment.SELECTED_ACCOUNT_ID, -1);
@@ -330,16 +332,7 @@ protected void onResume() {
     private void setTitleIndicatorColor() {
         //Basically, if we are in a top level account, use the default title color.
         //but propagate a parent account's title color to children who don't have own color
-        String parentAccountUID = mAccountsDbAdapter.getParentAccountUID(mAccountId);
         String colorCode = mAccountsDbAdapter.getAccountColorCode(mAccountId);
-        if (parentAccountUID == null
-                || parentAccountUID.equals(mAccountsDbAdapter.getGnuCashRootAccountUID())) {
-            sLastTitleColor = getResources().getColor(R.color.title_green);
-        } else {
-            String parentColor = mAccountsDbAdapter.getAccountColorCode(mAccountsDbAdapter.getAccountID(parentAccountUID));
-            sLastTitleColor = parentColor != null ? Color.parseColor(parentColor) : sLastTitleColor;
-        }
-
         if (colorCode != null){
             sLastTitleColor = Color.parseColor(colorCode);
         }
diff --git a/app/src/org/gnucash/android/ui/transactions/TransactionsListFragment.java b/app/src/org/gnucash/android/ui/transactions/TransactionsListFragment.java
index b7c44464..570a2e97 100644
--- a/app/src/org/gnucash/android/ui/transactions/TransactionsListFragment.java
+++ b/app/src/org/gnucash/android/ui/transactions/TransactionsListFragment.java
@@ -47,9 +47,11 @@
 import com.actionbarsherlock.view.MenuInflater;
 import com.actionbarsherlock.view.MenuItem;
 import org.gnucash.android.R;
-import org.gnucash.android.data.Account;
 import org.gnucash.android.data.Money;
-import org.gnucash.android.db.*;
+import org.gnucash.android.db.DatabaseAdapter;
+import org.gnucash.android.db.DatabaseCursorLoader;
+import org.gnucash.android.db.DatabaseHelper;
+import org.gnucash.android.db.TransactionsDbAdapter;
 import org.gnucash.android.ui.Refreshable;
 import org.gnucash.android.ui.accounts.AccountsListFragment;
 import org.gnucash.android.ui.widget.WidgetConfigurationActivity;
@@ -412,14 +414,16 @@ public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             parentView.post(new Runnable() {
                 @Override
                 public void run() {
-                    float extraPadding = getResources().getDimension(R.dimen.edge_padding);
-                    final android.graphics.Rect hitRect = new Rect();
-                    checkBoxView.getHitRect(hitRect);
-                    hitRect.right   += extraPadding;
-                    hitRect.bottom  += 3*extraPadding;
-                    hitRect.top     -= extraPadding;
-                    hitRect.left    -= 2*extraPadding;
-                    parentView.setTouchDelegate(new TouchDelegate(hitRect, checkBoxView));
+                    if (isAdded()){ //may be run when fragment has been unbound from activity
+                        float extraPadding = getResources().getDimension(R.dimen.edge_padding);
+                        final android.graphics.Rect hitRect = new Rect();
+                        checkBoxView.getHitRect(hitRect);
+                        hitRect.right   += extraPadding;
+                        hitRect.bottom  += 3*extraPadding;
+                        hitRect.top     -= extraPadding;
+                        hitRect.left    -= 2*extraPadding;
+                        parentView.setTouchDelegate(new TouchDelegate(hitRect, checkBoxView));
+                    }
                 }
             });
 
@@ -433,12 +437,20 @@ public void bindView(View view, Context context, Cursor cursor) {
 			Money amount = new Money(
 					cursor.getString(DatabaseAdapter.COLUMN_AMOUNT), 
 					mTransactionsDbAdapter.getCurrencyCode(mAccountID));
-			
+
+            //FIXME: Take normal account balances into consideration for double entries
+//            String mainAccountUID = cursor.getString(DatabaseAdapter.COLUMN_ACCOUNT_UID);
+//            Account.AccountType mainAccountType = mTransactionsDbAdapter.getAccountType(mainAccountUID);
+
 			//negate any transactions if this account is the origin in double entry
-			String doubleEntryAccountUID = cursor.getString(DatabaseAdapter.COLUMN_DOUBLE_ENTRY_ACCOUNT_UID);
-			if (doubleEntryAccountUID != null 
-					&& mTransactionsDbAdapter.isSameAccount(mAccountID, doubleEntryAccountUID)){
-				amount = amount.negate();				
+			String transferAccountUID = cursor.getString(DatabaseAdapter.COLUMN_DOUBLE_ENTRY_ACCOUNT_UID);
+
+			if (transferAccountUID != null
+					&& mTransactionsDbAdapter.isSameAccount(mAccountID, transferAccountUID)){
+//                Account.AccountType transferAccountType = mTransactionsDbAdapter.getAccountType(transferAccountUID);
+//
+//                if (mainAccountType.getNormalBalanceType() == transferAccountType.getNormalBalanceType())
+                amount = amount.negate();
 			}
 				
 			TextView tramount = (TextView) view.findViewById(R.id.transaction_amount);
@@ -457,34 +469,51 @@ public void bindView(View view, Context context, Cursor cursor) {
 				trNote.setVisibility(View.VISIBLE);
 				trNote.setText(description);
 			}
-			
-			long transactionTime = cursor.getLong(DatabaseAdapter.COLUMN_TIMESTAMP);
-			int position = cursor.getPosition();
-						
-			boolean hasSectionHeader;
-			if (position == 0){
-				hasSectionHeader = true;
-			} else {
-				cursor.moveToPosition(position - 1);
-				long previousTimestamp = cursor.getLong(DatabaseAdapter.COLUMN_TIMESTAMP);
-				cursor.moveToPosition(position);				
-				//has header if two consecutive transactions were not on same day
-				hasSectionHeader = !isSameDay(previousTimestamp, transactionTime);
-			}
-			
-			TextView dateHeader = (TextView) view.findViewById(R.id.date_section_header);
-			
-			if (hasSectionHeader){
-				java.text.DateFormat format = DateFormat.getLongDateFormat(getActivity());
-				String dateString = format.format(new Date(transactionTime));
-				dateHeader.setText(dateString);
-				dateHeader.setVisibility(View.VISIBLE);
-			} else {
-				dateHeader.setVisibility(View.GONE);
-			}
+
+            setSectionHeaderVisibility(view, cursor);
 		}
-		
-		private boolean isSameDay(long timeMillis1, long timeMillis2){
+
+        /**
+         * Toggles the visibilty of the section header based on whether the previous transaction and current were
+         * booked on the same day or not. Transactions a generally grouped by day
+         * @param view Parent view within which to find the section header
+         * @param cursor Cursor containing transaction data set
+         * @see #isSameDay(long, long)
+         */
+        private void setSectionHeaderVisibility(View view, Cursor cursor) {
+            long transactionTime = cursor.getLong(DatabaseAdapter.COLUMN_TIMESTAMP);
+            int position = cursor.getPosition();
+
+            boolean hasSectionHeader;
+            if (position == 0){
+                hasSectionHeader = true;
+            } else {
+                cursor.moveToPosition(position - 1);
+                long previousTimestamp = cursor.getLong(DatabaseAdapter.COLUMN_TIMESTAMP);
+                cursor.moveToPosition(position);
+                //has header if two consecutive transactions were not on same day
+                hasSectionHeader = !isSameDay(previousTimestamp, transactionTime);
+            }
+
+            TextView dateHeader = (TextView) view.findViewById(R.id.date_section_header);
+
+            if (hasSectionHeader){
+                java.text.DateFormat format = DateFormat.getLongDateFormat(getActivity());
+                String dateString = format.format(new Date(transactionTime));
+                dateHeader.setText(dateString);
+                dateHeader.setVisibility(View.VISIBLE);
+            } else {
+                dateHeader.setVisibility(View.GONE);
+            }
+        }
+
+        /**
+         * Checks if two timestamps have the same calendar day
+         * @param timeMillis1 Timestamp in milliseconds
+         * @param timeMillis2 Timestamp in milliseconds
+         * @return <code>true</code> if both timestamps are on same day, <code>false</code> otherwise
+         */
+        private boolean isSameDay(long timeMillis1, long timeMillis2){
 			Date date1 = new Date(timeMillis1);
 			Date date2 = new Date(timeMillis2);
 			
