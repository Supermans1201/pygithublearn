From 713e96e1f57b18c3d746cc38be347d2757eb8d7c Mon Sep 17 00:00:00 2001
From: Ngewi Fet <ngewif@gmail.com>
Date: Thu, 24 Jul 2014 14:32:08 +0200
Subject: [PATCH] Updated string translations and app version to 1.4.0-beta2

- Updated name of Cuban convertible peso currency name
- Updated change log to include opening balances feature
- Updated strings to generalize the account format (now multiple are supported, not just OFX)
- Fixed: Generation of opening balance account for german locale has no parent Equity account
---
 CHANGELOG.md                                       |  1 +
 app/AndroidManifest.xml                            |  2 +-
 app/res/values-de/strings.xml                      | 27 +++---
 app/res/values-el/strings.xml                      | 24 +++---
 app/res/values-es-rMX/strings.xml                  | 24 +++---
 app/res/values-es/strings.xml                      | 24 +++---
 app/res/values-fr/strings.xml                      | 20 ++---
 app/res/values-hu/strings.xml                      | 24 +++---
 app/res/values-it/strings.xml                      | 24 +++---
 app/res/values-nb/strings.xml                      | 24 +++---
 app/res/values-nl/strings.xml                      | 24 +++---
 app/res/values-pt-rBR/strings.xml                  | 24 +++---
 app/res/values-ru/strings.xml                      | 24 +++---
 app/res/values-zh/strings.xml                      | 20 ++---
 app/res/values/strings.xml                         | 35 ++++----
 .../org/gnucash/android/db/AccountsDbAdapter.java  | 99 ++++++++++++----------
 .../org/gnucash/android/export/ExporterTask.java   | 19 +++--
 17 files changed, 223 insertions(+), 216 deletions(-)

diff --git a/CHANGELOG.md b/CHANGELOG.md
index c56b2aca..6d009561 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -12,6 +12,7 @@ Splits store the amounts as absolute values and then separately the kind - CREDI
 * Feature: Use account specific labels for CREDIT/DEBIT instead of just generic "debit" and "credit"
 * Feature: Import GnuCash XML files - accounts and transactions only (experimental)
 * Feature: Back up transactions in an XML format (similar to GnuCash XML) called .gnca (Gnucash Android)
+* Feature: Option for saving opening balances before deleting transactions
 * Improved: Updated processes for moving, creating, exporting, deleting transactions to work with splits
 * Improved: Updated computation of account and transaction balances to be in line with accounting principles
 * Improved: Updated color (red/green) display to match movement in the account, and not a representation of the side of the split
diff --git a/app/AndroidManifest.xml b/app/AndroidManifest.xml
index 238b4f54..3a8cc1e8 100644
--- a/app/AndroidManifest.xml
+++ b/app/AndroidManifest.xml
@@ -17,7 +17,7 @@
 
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="org.gnucash.android"
-    android:versionCode="30"
+    android:versionCode="31"
     android:versionName="@string/app_version_name" >
 
     <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>
diff --git a/app/res/values-de/strings.xml b/app/res/values-de/strings.xml
index 296805c1..01a73eac 100644
--- a/app/res/values-de/strings.xml
+++ b/app/res/values-de/strings.xml
@@ -20,7 +20,7 @@
     <string name="title_add_account">Neues Konto</string>
     <string name="title_edit_account">Konto bearbeiten</string>
     <string name="info_details">Info</string>
-    <string name="menu_export_ofx">OFX-Datei exportieren</string>
+    <string name="menu_export">OFX-Datei exportieren</string>
     <string name="description_add_transaction_icon">Neue Buchung in ein Konto</string>
     <string name="label_no_accounts">Keine Konten vorhanden</string>
     <string name="label_account_name">Kontoname</string>
@@ -50,7 +50,7 @@
     <string name="title_export_dialog">Buchungen exportieren</string>
     <string name="option_export_all_transactions">Alle Buchungen exportieren</string>
     <string name="hint_export_choice">Auswhlen, um alle Buchungen zu exportieren. Andernfalls werden nur die neuen Buchungen seit letztem Export exportiert.</string>
-    <string name="toast_export_error">Fehler beim Exportieren der OFX-Datei</string>
+    <string name="toast_export_error">Fehler beim Exportieren der %1$s-Datei</string>
     <string name="btn_export">Export</string>
     <string name="option_delete_after_export">L&#246;schen nach dem Exportieren</string>
     <string name="hint_delete_after_export">Alle exportierten Buchungen werden nach dem Export gelscht.</string>
@@ -115,7 +115,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -192,8 +193,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -242,7 +241,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -273,10 +273,9 @@
 	<string name="summary_about_gnucash">GnuCashMobile ist eine mobile Datenaufzeichungs-App f&#252;r Android. \nEs erm&#246;glicht die schnelle und flexible Registrierung von Zahlungsvorg&#228;ngen unterwegs, die dann als Datei im OFX-Format exportiert und von der GnuCash-Anwendung an einem Desktop-PC importiert werden k&#246;nnen.</string>
 	<string name="title_about">&#220;ber</string>
 	<string name="ofx_file_exported_to">OFX-Datei exportiert nach:</string>
-	<string name="toast_error_exporting_ofx">Fehler beim Exportieren der OFX-Datei:\n</string>
-	<string name="toast_ofx_exported_to">OFX-Datei erfolgreich exportiert nach:\n</string>
-	<string name="title_export_email">GnuCash exportierte OFX-Datei</string>
-	<string name="description_export_email">GnuCash-Konten-Export von </string>
+	<string name="toast_format_exported_to">%1$s-Datei erfolgreich exportiert nach:\n</string>
+	<string name="title_export_email">GnuCash Android exportierte %1$s-Datei</string>
+	<string name="description_export_email">GnuCash-Android-Konten-Export von </string>
 	<string name="header_transaction_settings">Buchungen</string>
 	<string name="title_transaction_preferences">Einstellungen Buchungen</string>
 	<string name="title_account_preferences">Einstellungen Konten</string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new">Neuigkeiten in dieser Version</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
     </string>
 	<string name="label_dismiss">Schlieen</string>
@@ -392,7 +392,6 @@
     </string-array>
     <string name="title_scheduled_transactions">Eingeplante Buchungen</string>
     <string name="title_select_export_destination">Select destination for export</string>
-    <string name="toast_error_exporting">Could not write OFX file to :\n</string>
     <string name="hint_split_memo">Memo</string>
     <string name="label_spend">Spend</string>
     <string name="label_receive">Receive</string>
@@ -413,7 +412,7 @@
     <string name="label_account_balance">Balance:</string>
     <string name="toast_no_recent_backup">No recent backup found</string>
     <string name="account_name_opening_balances">Anfangsbestand</string>
-    <string name="account_name_equity"></string> <!-- This is no error, the default German locale has no parent Equity account -->
+    <string name="account_name_equity"> </string> <!-- This is no error, the default German locale has no parent Equity account -->
     <string name="summary_save_opening_balances">Enable to save the current account balance (before deleting transactions) as new opening balance after deleting transactions
     </string>
     <string name="title_save_opening_balances">Save account opening balances</string>
diff --git a/app/res/values-el/strings.xml b/app/res/values-el/strings.xml
index a208ffe9..fd98866d 100644
--- a/app/res/values-el/strings.xml
+++ b/app/res/values-el/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account"> </string>
     <string name="title_edit_account"> </string>
     <string name="info_details"></string>
-    <string name="menu_export_ofx"> OFX</string>
+    <string name="menu_export"> OFX</string>
     <string name="description_add_transaction_icon">      </string>
     <string name="label_no_accounts">    </string>
     <string name="label_account_name"> </string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">Export transactions</string>
     <string name="option_export_all_transactions">   </string>
     <string name="hint_export_choice">,          .          </string>
-    <string name="toast_export_error">   OFX</string>
+    <string name="toast_export_error">   %1$s</string>
     <string name="btn_export"></string>
     <string name="option_delete_after_export">   </string>
     <string name="hint_delete_after_export">    ,       </string>
@@ -116,7 +116,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -193,8 +194,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dolar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dolar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -278,10 +278,9 @@
 	eXchange (OFX)      GnuCash  
 	.</string>
 	<string name="title_about"></string>
-	<string name="toast_error_exporting">   OFX  :\n</string>
-	<string name="toast_ofx_exported_to"> OFX  :\n</string>
-	<string name="title_export_email"> GnuCash OFX</string>
-	<string name="description_export_email"> GnuCash OFX  </string>
+	<string name="toast_format_exported_to"> %1$s  :\n</string>
+	<string name="title_export_email"> GnuCash Android %1$s</string>
+	<string name="description_export_email"> GnuCash Android  </string>
 	<string name="header_transaction_settings"></string>
 	<string name="title_transaction_preferences"> </string>
 	<string name="title_account_preferences"> </string>
@@ -311,11 +310,12 @@
 	<string name="title_whats_new">  </string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss"></string>
diff --git a/app/res/values-es-rMX/strings.xml b/app/res/values-es-rMX/strings.xml
index 10ef73eb..26833c09 100644
--- a/app/res/values-es-rMX/strings.xml
+++ b/app/res/values-es-rMX/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account">Crear cuenta</string>
     <string name="title_edit_account">Editar cuenta</string>
     <string name="info_details">Detalles</string>
-    <string name="menu_export_ofx">Exportar a OFX</string>
+    <string name="menu_export">Exportar a OFX</string>
     <string name="description_add_transaction_icon">Agregar transacci&#243;n a una cuenta</string>
     <string name="label_no_accounts">No hay cuentas</string>
     <string name="label_account_name">Nombre de la cuenta</string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">Export Transactions</string>
     <string name="option_export_all_transactions">Exportar todas las transacciones</string>
     <string name="hint_export_choice">Por omisi&#243;n, s&#243;lo las trasacciones nuevas ser&#225;n exportadas. Selecione esta opci&#243;n para exportar todas las transacciones</string>
-    <string name="toast_export_error">Error al exportar los datos OFX</string>
+    <string name="toast_export_error">Error al exportar los datos %1$s</string>
     <string name="btn_export">Exportar</string>
     <string name="option_delete_after_export">Borrar despu&#233;s de exportar</string>
     <string name="hint_delete_after_export">Todas las transacciones ser&#225;n borradas despu&#233;s de ser exportadas completamente</string>
@@ -116,7 +116,8 @@
 		<item>C&#243;rdoba Nicarag&#252;ense</item>
 		<item>Col&#243;n Costarricense</item>
 		<item>Kuna Croata</item>
-		<item>Peso Cubano</item>
+        <item>Peso convertible</item>
+        <item>Peso Cubano</item>
 		<item>Corona Checa</item>
 		<item>Dalasi</item>
 		<item>Corona Danesa</item>
@@ -193,8 +194,6 @@
 		<item>Rupia pakistan&#237;</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso convertible</item>
-		<item>Peso uruguayo</item>
 		<item>Peso filipino</item>
 		<item>Platino</item>
 		<item>Libra esterlina</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Peso uruguayo en Unidades Indexadas (URUIURUI)</item>
-		<item>D&#243;lar Estadounidense</item>
+        <item>Peso uruguayo</item>
+        <item>D&#243;lar Estadounidense</item>
 		<item>Som uzbeko</item>
 		<item>Vatu</item>
 		<item>Euro WIR</item>
@@ -273,10 +273,9 @@
 	<string name="title_about_gnucash">Acerca de Gnucash</string>
 	<string name="summary_about_gnucash">GnucashMobile es una aplicaci&#243;n de registro de finanzas para Android\nEsta permite un registro flexible de los gastos realizados, los cuales pueden ser exportados a formato Open Financial eXchange (OFX) e importados a Gnucash desde una computadora de escritorio.</string>
 	<string name="title_about">Acerca de</string>
-	<string name="toast_error_exporting">No se pudo escribir el archivo OFX en:\n</string>
-	<string name="toast_ofx_exported_to">Archivo OFX exportado a:\n</string>
-	<string name="title_export_email">Exportaci&#243;n OFX de Gnucash</string>
-	<string name="description_export_email">Exportaci&#243;n OFX de Gnucash </string>
+	<string name="toast_format_exported_to">Archivo %1$s exportado a:\n</string>
+	<string name="title_export_email">Exportaci&#243;n %1$s de Gnucash Android</string>
+	<string name="description_export_email">Exportaci&#243;n de Gnucash Android </string>
 	<string name="header_transaction_settings">Transacciones</string>
 	<string name="title_transaction_preferences">Opciones de transacci&#243;n</string>
 	<string name="title_account_preferences">Opciones de cuenta</string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new">&#191;Qu&#233; hay nuevo?</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Cerrar</string>
diff --git a/app/res/values-es/strings.xml b/app/res/values-es/strings.xml
index dfe91296..ffb5796d 100644
--- a/app/res/values-es/strings.xml
+++ b/app/res/values-es/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account">Crear Cuenta</string>
     <string name="title_edit_account">Editar Cuenta</string>
     <string name="info_details">Info</string>
-    <string name="menu_export_ofx">Exportar OFX</string>
+    <string name="menu_export">Exportar OFX</string>
     <string name="description_add_transaction_icon">A&#241;adir una nueva transacci&#243;n a una cuenta</string>
     <string name="label_no_accounts">No hay cuentas que mostrar</string>
     <string name="label_account_name">Nombre de la cuenta</string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">Export Transactions</string>
     <string name="option_export_all_transactions">Exportar todas las transacciones</string>
     <string name="hint_export_choice">Por defecto solo las nuevas transacciones desde la &#250;ltima exportaci&#243;n ser&#225;n exportadas. Seleccione esta opci&#243;n para exportar todas las transacciones</string>
-    <string name="toast_export_error">Error exportando datos OFX</string>
+    <string name="toast_export_error">Error exportando datos %1$s</string>
     <string name="btn_export">Exportar</string>
     <string name="option_delete_after_export">Borrar despu&#233;s de exportar</string>
     <string name="hint_delete_after_export">Todas las transacciones exportadas ser&#225;n borradas cuando la exportaci&#243;n haya terminado</string>
@@ -116,7 +116,8 @@
 		<item>C&#243;rdoba Nicaragense</item>
 		<item>Col&#243;n Costarricense</item>
 		<item>Kuna Croata</item>
-		<item>Peso Cubano</item>
+        <item>Peso convertible</item>
+        <item>Peso Cubano</item>
 		<item>Corona Checa</item>
 		<item>Dalasi</item>
 		<item>Corona Danesa</item>
@@ -193,8 +194,6 @@
 		<item>Rupia pakistan&#237;</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso convertible</item>
-		<item>Peso uruguayo</item>
 		<item>Peso filipino</item>
 		<item>Platino</item>
 		<item>Libra esterlina</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Peso uruguayo en Unidades Indexadas (URUIURUI)</item>
-		<item>D&#243;lar Estadounidense</item>
+        <item>Peso uruguayo</item>
+        <item>D&#243;lar Estadounidense</item>
 		<item>Som uzbeko</item>
 		<item>Vatu</item>
 		<item>Euro WIR</item>
@@ -273,10 +273,9 @@
 	<string name="title_about_gnucash">Acerca de Gnucash</string>
 	<string name="summary_about_gnucash">GnucashMobile es una aplicaci&#243;n de registro de gastos financieros para Android.\nPermite un registro flexible de gastos en cualquier lugar que luego pueden ser exportados al formato Open Financial eXchange (OFX) e importados en la aplicaci&#243;n Gnucash para el escritorio.</string>
 	<string name="title_about">Acerca de</string>
-	<string name="toast_error_exporting">No se pudo guardar el archivo OFX en:\n</string>
-	<string name="toast_ofx_exported_to">Archivo OFX exportado a:\n</string>
-	<string name="title_export_email">Exportaci&#243;n OFX de Gnucash</string>
-	<string name="description_export_email">Exportaci&#243;n OFX de Gnucash</string>
+	<string name="toast_format_exported_to">Archivo %1$s exportado a:\n</string>
+	<string name="title_export_email">Exportaci&#243;n %1$s de Gnucash Android</string>
+	<string name="description_export_email">Exportaci&#243;n de Gnucash</string>
 	<string name="header_transaction_settings">Transacciones</string>
 	<string name="title_transaction_preferences">Preferencias de transacciones</string>
 	<string name="title_account_preferences">Preferencias de cuentas</string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new">Novedades</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Cerrar</string>
diff --git a/app/res/values-fr/strings.xml b/app/res/values-fr/strings.xml
index 0ed99da5..2f037614 100644
--- a/app/res/values-fr/strings.xml
+++ b/app/res/values-fr/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account">Cr&#233;er un compte</string>
     <string name="title_edit_account">diter le compte</string>
     <string name="info_details">Informations</string>
-    <string name="menu_export_ofx">Exporter en OFX</string>
+    <string name="menu_export">Exporter en OFX</string>
     <string name="description_add_transaction_icon">Ajoute une nouvelle transaction &#224; un compte</string>
     <string name="label_no_accounts">Aucun compte &#224; afficher</string>
     <string name="label_account_name">Nom de compte</string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">Exporter les transactions</string>
     <string name="option_export_all_transactions">Exporter toutes les transactions</string>
     <string name="hint_export_choice">Par d&#233;faut, seul les nouvelles transactions depuis le dernier export seront exportes. Cochez cette option pour exporter toutes les transactions</string>
-    <string name="toast_export_error">Erreur lors de l\'export des donn&#233;es en OFX</string>
+    <string name="toast_export_error">Erreur lors de l\'export des donn&#233;es en %1$s</string>
     <string name="btn_export">Exporter</string>
     <string name="option_delete_after_export">Supprimer apr&#232;s export</string>
     <string name="hint_delete_after_export">Toutes les transactions export&#233;es seront supprimes apr&#233;s l\'export</string>
@@ -116,6 +116,7 @@
         <item>Cordoba Oro</item>
         <item>Costa Rican Colon</item>
         <item>Croatian Kuna</item>
+        <item>Cuban Convertible Peso</item>
         <item>Cuban Peso</item>
         <item>Czech Koruna</item>
         <item>Dalasi</item>
@@ -193,8 +194,6 @@
         <item>Pakistan Rupee</item>
         <item>Palladium</item>
         <item>Pataca</item>
-        <item>Peso Convertible</item>
-        <item>Peso Uruguayo</item>
         <item>Philippine Peso</item>
         <item>Platinum</item>
         <item>Pound Sterling</item>
@@ -243,6 +242,7 @@
         <item>Unidad de Valor Real</item>
         <item>Unidades de fomento</item>
         <item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
+        <item>Uruguayan Peso</item>
         <item>US Dollar</item>
         <item>Uzbekistan Sum</item>
         <item>Vatu</item>
@@ -273,10 +273,9 @@
     <string name="title_about_gnucash"> propos de GnuCash</string>
     <string name="summary_about_gnucash">GnucashMobile est une application mobile de suivis de finance pour Android.\nElle permet un suivi simple des d&#233;penses qui peut &#234;tre export&#233; vers le format Open Financial eXchange (OFX) et import&#233; dans GnuCash pour PC.</string>
     <string name="title_about">A propos</string>
-    <string name="toast_error_exporting">Impossible d\'&#233;crire un fichier OFX en :\n</string>
-    <string name="toast_ofx_exported_to">Fichier OFX export&#233; en :\n</string>
-    <string name="title_export_email">GnuCash OFX export</string>
-    <string name="description_export_email">GnuCash OFX export de </string>
+    <string name="toast_format_exported_to">Fichier %1$s export&#233; en :\n</string>
+    <string name="title_export_email">GnuCash Android %1$s export</string>
+    <string name="description_export_email">GnuCash Android export de </string>
     <string name="header_transaction_settings">Transactions</string>
     <string name="title_transaction_preferences">Pr&#233;f&#233;rences des transactions</string>
     <string name="title_account_preferences">Pr&#233;f&#233;rences du compte</string>
@@ -305,11 +304,12 @@
     <string name="title_whats_new">Nouveautes</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
     <string name="label_dismiss">Passer</string>
diff --git a/app/res/values-hu/strings.xml b/app/res/values-hu/strings.xml
index 8dd9a501..2314ab77 100644
--- a/app/res/values-hu/strings.xml
+++ b/app/res/values-hu/strings.xml
@@ -20,7 +20,7 @@
     <string name="title_add_account">Create Account</string>
     <string name="title_edit_account">Edit Account</string>
     <string name="info_details">Info</string>
-    <string name="menu_export_ofx">Export OFX</string>
+    <string name="menu_export">Export OFX</string>
     <string name="description_add_transaction_icon">Add a new transaction to an account</string>
     <string name="label_no_accounts">No accounts to display</string>
     <string name="label_account_name">Account name</string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">Export Transactions</string>
     <string name="option_export_all_transactions">Export all transactions</string>
     <string name="hint_export_choice">By default, only new transactions since last export will be exported. Check this option to export all transactions</string>
-    <string name="toast_export_error">Error exporting OFX data</string>
+    <string name="toast_export_error">Error exporting %1$s data</string>
     <string name="btn_export">Export</string>
     <string name="option_delete_after_export">Delete after export</string>
     <string name="hint_delete_after_export">All exported transactions will be deleted when exporting is completed</string>
@@ -116,7 +116,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -193,8 +194,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -273,10 +273,9 @@
 	<string name="title_about_gnucash">About GnuCash</string>
 	<string name="summary_about_gnucash">Gnucash is a mobile finance expense tracker application for Android.\nIt enables flexible tracking of expenses on-the-go which can be exported to the Open Financial eXchange (OFX) format and imported into GnuCash for the desktop.</string>
 	<string name="title_about">About</string>
-	<string name="toast_error_exporting">Could not write OFX file to :\n</string>
-	<string name="toast_ofx_exported_to">OFX file exported to:\n</string>
-	<string name="title_export_email">GnuCash OFX export</string>
-	<string name="description_export_email">GnuCash OFX Export from </string>
+	<string name="toast_format_exported_to">%1$s file exported to:\n</string>
+	<string name="title_export_email">GnuCash %1$s export</string>
+	<string name="description_export_email">GnuCash Android Export from </string>
 	<string name="header_transaction_settings">Transactions</string>
 	<string name="title_transaction_preferences">Transaction Preferences</string>
 	<string name="title_account_preferences">Account Preferences</string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new">What\'s New</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Dismiss</string>
diff --git a/app/res/values-it/strings.xml b/app/res/values-it/strings.xml
index f40568a1..b4882656 100644
--- a/app/res/values-it/strings.xml
+++ b/app/res/values-it/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account">Crea conto</string>
     <string name="title_edit_account">Modifica conto</string>
     <string name="info_details">Informazioni</string>
-    <string name="menu_export_ofx">Esporta OFX</string>
+    <string name="menu_export">Esporta OFX</string>
     <string name="description_add_transaction_icon">Aggiungi una nuova transazione al conto</string>
     <string name="label_no_accounts">Nessun conto da visualizzare</string>
     <string name="label_account_name">Nome conto</string>
@@ -52,7 +52,7 @@
     <string name="title_export_dialog">Esporta transazioni</string>
     <string name="option_export_all_transactions">Esporta tutte le transazioni</string>
     <string name="hint_export_choice">Di default, verranno esportate solo le transazioni dall\'ultima esportazione. Selezionare questa opzione per esportare tutte le transazioni</string>
-    <string name="toast_export_error">Errore nell\'esportazione dei dati OFX</string>
+    <string name="toast_export_error">Errore nell\'esportazione dei dati %1$s</string>
     <string name="btn_export">Esporta</string>
     <string name="option_delete_after_export">Elimina dopo l\'esportazione</string>
     <string name="hint_delete_after_export">Tutte le transazioni esportate verranno eliminate al termine dell\'esportazione</string>
@@ -117,7 +117,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -194,8 +195,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -244,7 +243,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -274,10 +274,9 @@
 	<string name="title_about_gnucash">Informazioni su GnuCash</string>
 	<string name="summary_about_gnucash">GnuCashMobile &#232; un\'applicazione Android per tenere traccia delle proprie spese.\nPermette di registrare le proprie uscite al volo, di esportarle in formato OFX (Open Financial eXchange) e di importarle nella versione desktop di GnuCash.</string>
 	<string name="title_about">Informazioni</string>
-	<string name="toast_error_exporting">Impossibile scrivere il file OFX in:\n</string>
-	<string name="toast_ofx_exported_to">File OFX esportato in:\n</string>
-	<string name="title_export_email">Esportazione file OFX di GnuCash</string>
-	<string name="description_export_email">Esportazione OFX di GnuCash con </string>
+	<string name="toast_format_exported_to">File %1$s esportato in:\n</string>
+	<string name="title_export_email">Esportazione file %1$s di GnuCash</string>
+	<string name="description_export_email">Esportazione di GnuCash Android con </string>
 	<string name="header_transaction_settings">Transazioni</string>
 	<string name="title_transaction_preferences">Preferenze della transazione</string>
 	<string name="title_account_preferences">Preferenze del conto</string>
@@ -306,11 +305,12 @@
 	<string name="title_whats_new">Novit</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Chiudi</string>
diff --git a/app/res/values-nb/strings.xml b/app/res/values-nb/strings.xml
index 7efbe54a..34b207f7 100644
--- a/app/res/values-nb/strings.xml
+++ b/app/res/values-nb/strings.xml
@@ -22,7 +22,7 @@
     <string name="title_add_account">Opprett konto</string>
     <string name="title_edit_account">Rediger konto</string>
     <string name="info_details">Informasjon</string>
-    <string name="menu_export_ofx">Eksport OFX</string>
+    <string name="menu_export">Eksport OFX</string>
     <string name="description_add_transaction_icon">Legg til ny kontotransaksjon</string>
     <string name="label_no_accounts">Ingen kontoer  vise</string>
     <string name="label_account_name">Kontonavn</string>
@@ -52,7 +52,7 @@
     <string name="title_export_dialog">Export Transactions</string>
     <string name="option_export_all_transactions">Eksporter alle transaksjoner</string>
     <string name="hint_export_choice">Vanligvis vil kun nye transaksjoner bli eksportert.  Merk dette valget for  eksportere alle transaksjonene</string>
-    <string name="toast_export_error">Feil ved eksportering av OFX-data</string>
+    <string name="toast_export_error">Feil ved eksportering av %1$s-data</string>
     <string name="btn_export">Eksporter</string>
     <string name="option_delete_after_export">Slett etter eksportering</string>
     <string name="hint_delete_after_export">Alle eksporterte transaksjoner vil bli slettet etter eksportering</string>
@@ -117,7 +117,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danske kroner</item>
@@ -194,8 +195,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Engelske pund</item>
@@ -244,7 +243,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>Amerikanske dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>Amerikanske dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -276,10 +276,9 @@
 muligheten til  raskt og fleksibelt logge transaksjoner som kan eksporteres til OFX (Open Financial eXchange)-
 format og importeres i regnskapsprogrammet GnuCash for PC.</string> 
 	<string name="title_about">Om</string>
-	<string name="toast_error_exporting">Kunne ikke lagre OFX-fil til :\n</string>
-	<string name="toast_ofx_exported_to">OFX-fil eksportert til:\n</string>
-	<string name="title_export_email">Gnucash OFX-eksportering</string>
-	<string name="description_export_email">Gnucash OFX-eksportering til </string>
+	<string name="toast_format_exported_to">%1$s-fil eksportert til:\n</string>
+	<string name="title_export_email">Gnucash Android %1$s-eksportering</string>
+	<string name="description_export_email">Gnucash Android-eksportering til </string>
 	<string name="header_transaction_settings">Transaksjoner</string>
 	<string name="title_transaction_preferences">Transaksjonsinnstillinger</string>
 	<string name="title_account_preferences">Kontoinnstillinger</string>
@@ -308,11 +307,12 @@ format og importeres i regnskapsprogrammet GnuCash for PC.</string>
 	<string name="title_whats_new">Hva er nytt</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Ferdig</string>
diff --git a/app/res/values-nl/strings.xml b/app/res/values-nl/strings.xml
index 40e64618..ddc904d0 100644
--- a/app/res/values-nl/strings.xml
+++ b/app/res/values-nl/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account">Nieuw rekening</string>
     <string name="title_edit_account">Rekening bewerken</string>
     <string name="info_details">Info</string>
-    <string name="menu_export_ofx">OFX exporteren</string>
+    <string name="menu_export">OFX exporteren</string>
     <string name="description_add_transaction_icon">Nieuwe transactie in een rekening</string>
     <string name="label_no_accounts">Geen rekeningen beschikbaar</string>
     <string name="label_account_name">Rekeningnaam</string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog">OFX Exporteren</string>
     <string name="option_export_all_transactions">All transacties exporteren</string>
     <string name="hint_export_choice">Aanvinken om alle transacties te exporteren. Anders worden enkel de nieuwe transacties sinds de laatste export ge&#235;xporteerd.</string>
-    <string name="toast_export_error">Fout tijdens het exporteren van de OFX data</string>
+    <string name="toast_export_error">Fout tijdens het exporteren van de %1$s data</string>
     <string name="btn_export">Exporteer</string>
     <string name="option_delete_after_export">Verwijderen na exporteren</string>
     <string name="hint_delete_after_export">Alle ge&#235;xporteerde transacties zullen verwijderd worden na de export</string>
@@ -116,7 +116,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -193,8 +194,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -273,10 +273,9 @@
 	<string name="title_about_gnucash">Over GnuCash</string>
 	<string name="summary_about_gnucash">GnucashMobile is een mobiele uitgavebeheerstoepassing voor Android.\nHet laat onderweg een snelle en flexibele registratie van uitgaven toe, die als OFX gegevens ge&#235;xporteerd kunnen worden om in de GnuCash-toepassing op een desktop-computer te importeren.</string>
 	<string name="title_about">Over</string>
-	<string name="toast_error_exporting">Fout bij het schrijven van de OFX data naar bestand:\n</string>
-	<string name="toast_ofx_exported_to">OFX data ge&#235;exporteerd naar:\n</string>
-	<string name="title_export_email">GnuCash OFX export</string>
-	<string name="description_export_email">GnuCash OFX Export van </string>
+	<string name="toast_format_exported_to">%1$s data ge&#235;exporteerd naar:\n</string>
+	<string name="title_export_email">GnuCash Android %1$s export</string>
+	<string name="description_export_email">GnuCash Android Export van </string>
 	<string name="header_transaction_settings">Transacties</string>
 	<string name="title_transaction_preferences">Transactie voorkeuren</string>
 	<string name="title_account_preferences">Account voorkeuren</string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new">Nieuw sinds de vorige versie</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Wijs af</string>
diff --git a/app/res/values-pt-rBR/strings.xml b/app/res/values-pt-rBR/strings.xml
index cedfb152..89c6a37b 100644
--- a/app/res/values-pt-rBR/strings.xml
+++ b/app/res/values-pt-rBR/strings.xml
@@ -20,7 +20,7 @@
 	  <string name="title_add_account">Criar Conta</string>
 	  <string name="title_edit_account">Editar Conta</string>
 	  <string name="info_details">Info</string>
-	  <string name="menu_export_ofx">Exportar OFX</string>
+	  <string name="menu_export">Exportar OFX</string>
 	  <string name="description_add_transaction_icon">Adicionar nova transao para uma conta</string>
 	  <string name="label_no_accounts">Sem contas para apresentar</string>
 	  <string name="label_account_name">Nome da conta</string>
@@ -50,7 +50,7 @@
 	  <string name="title_export_dialog">Export Transactions</string>
 	  <string name="option_export_all_transactions">Exportar todas as transaes</string>
 	  <string name="hint_export_choice">Por padro, s sero exportadas as transaes criadas aps o ltimo procedimento de exportar. Selecionar essa opo para exportar todas as transaes.</string>
-	  <string name="toast_export_error">Erro ao exportar os dados OFX</string>
+	  <string name="toast_export_error">Erro ao exportar os dados %1$s</string>
 	  <string name="btn_export">Exportar</string>
 	  <string name="option_delete_after_export">Deletar aps exportar</string>
 	  <string name="hint_delete_after_export">Todas as transao exportadas sero deletadas aps completar o procedimento de exportar.</string>
@@ -115,7 +115,8 @@
 	    <item>Ouro Cordoba</item>
 	    <item>Colon de Costa Rica</item>
 	    <item>Kuna Croata</item>
-	    <item>Peso Cubano</item>
+        <item>Peso conversvel Cubano</item>
+        <item>Peso Cubano</item>
 	    <item>Coroa Tcheca</item>
 	    <item>Dalasi</item>
 	    <item>Coroa da Dinamarca</item>
@@ -192,8 +193,6 @@
 	    <item>Rupia do Paquisto</item>
 	    <item>Paladio</item>
 	    <item>Pataca</item>
-	    <item>Peso conversvel</item>
-	    <item>Peso Uruguaio</item>
 	    <item>Peso Filipino</item>
 	    <item>Platina</item>
 	    <item>Libra Esterlina</item>
@@ -242,7 +241,8 @@
 	    <item>Unidade de Valor Real</item>
 	    <item>unidades de fomento</item>
 	    <item>Uruguai Peso em Unidades Indexadas</item>
-	    <item>Dlar dos EUA</item>
+        <item>Peso Uruguaio</item>
+        <item>Dlar dos EUA</item>
 	    <item>Som do Uzbequisto</item>
 	    <item>Vatu</item>
 	    <item>WIR Euro</item>
@@ -272,10 +272,9 @@
 	  <string name="title_about_gnucash">Sobre o GnuCash</string>
 	  <string name="summary_about_gnucash">GnuCash  um aplicativo para controle de despesas no Android.\nEle proporciona uma forma flexvel de registrar despesas on-the-go, que podem ser exportadas para o formato Open Financial eXchange (OFX) e importadas para o Gnucash para desktop.</string>
 	  <string name="title_about">Sobre</string>
-	  <string name="toast_error_exporting">No foi possvel gravar o arquivo OFX em :\n</string>
-	  <string name="toast_ofx_exported_to">Arquivo OFX exportado para:\n</string>
-	  <string name="title_export_email">Exportar GnuCash OFX</string>
-	  <string name="description_export_email">Exportar GnuCash OFX de</string>
+	  <string name="toast_format_exported_to">Arquivo %1$s exportado para:\n</string>
+	  <string name="title_export_email">Exportar GnuCash %1$s</string>
+	  <string name="description_export_email">Exportar GnuCash Android de</string>
 	  <string name="header_transaction_settings">Transaes</string>
 	  <string name="title_transaction_preferences">Preferncias para Transaes</string>
 	  <string name="title_account_preferences">Preferncias para Contas</string>
@@ -304,11 +303,12 @@
 	  <string name="title_whats_new">O que h de novo</string>
 	  <string name="whats_new">
           - Create multiple splits per transaction\n
-          - Account balances now follow GnuCash Desktop accounting principles\n
-          - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+          - Fixed computation of account balances for different account types\n
+          - Use account-specific labels for CREDIT/DEBITs\n
           - Automated backup of database before deletion operations\n
           - Restore most recent backup of database (in Settings -> General)\n
           - Read transactions from GnuCash XML files (limited support)\n
+          - Option to save opening balances before deleting transactions\n
           - Multiple bug fixes and improvements\n
 	  </string>
 	  <string name="label_dismiss">Descartar</string>
diff --git a/app/res/values-ru/strings.xml b/app/res/values-ru/strings.xml
index ed2139d5..436261d9 100644
--- a/app/res/values-ru/strings.xml
+++ b/app/res/values-ru/strings.xml
@@ -21,7 +21,7 @@
     <string name="title_add_account"> </string>
     <string name="title_edit_account"> </string>
     <string name="info_details"></string>
-    <string name="menu_export_ofx"> OFX</string>
+    <string name="menu_export"> OFX</string>
     <string name="description_add_transaction_icon">    </string>
     <string name="label_no_accounts"> </string>
     <string name="label_account_name"> </string>
@@ -51,7 +51,7 @@
     <string name="title_export_dialog"> </string>
     <string name="option_export_all_transactions"> </string>
     <string name="hint_export_choice">  ,    .</string>
-    <string name="toast_export_error">   OFX</string>
+    <string name="toast_export_error">   %1$s</string>
     <string name="btn_export"></string>
     <string name="option_delete_after_export">  </string>
     <string name="hint_delete_after_export">      .</string>
@@ -116,7 +116,8 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
-		<item>Cuban Peso</item>
+        <item>Cuban Convertible Peso</item>
+        <item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
 		<item>Danish Krone</item>
@@ -193,8 +194,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -243,7 +242,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan Peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -273,10 +273,9 @@
 	<string name="title_about_gnucash"> Gnucash</string>
         <string name="summary_about_gnucash">Gnucash -     Android.\n         Gnucash       OFX (Open Financial eXchange).</string>
 	<string name="title_about"> </string>
-	<string name="toast_error_exporting">    OFX  :\n</string>
-	<string name="toast_ofx_exported_to"> OFX  :\n</string>
-	<string name="title_export_email"> OFX-  Gnucash</string>
-	<string name="description_export_email">OFX-,   Gnucash </string>
+	<string name="toast_format_exported_to"> %1$s  :\n</string>
+	<string name="title_export_email"> %1$s-  Gnucash Android</string>
+	<string name="description_export_email">GnuCash Android export from </string>
 	<string name="header_transaction_settings"></string>
 	<string name="title_transaction_preferences"> </string>
 	<string name="title_account_preferences"> </string>
@@ -305,11 +304,12 @@
 	<string name="title_whats_new"></string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss"></string>
diff --git a/app/res/values-zh/strings.xml b/app/res/values-zh/strings.xml
index a7075589..fc21bbbd 100644
--- a/app/res/values-zh/strings.xml
+++ b/app/res/values-zh/strings.xml
@@ -20,7 +20,7 @@
     <string name="title_add_account"></string>
     <string name="title_edit_account"></string>
     <string name="info_details"></string>
-    <string name="menu_export_ofx">OFX</string>
+    <string name="menu_export">OFX</string>
     <string name="description_add_transaction_icon"></string>
     <string name="label_no_accounts"></string>
     <string name="label_account_name"></string>
@@ -50,7 +50,7 @@
     <string name="title_export_dialog"></string>
     <string name="option_export_all_transactions"></string>
     <string name="hint_export_choice"></string>
-    <string name="toast_export_error">OFX</string>
+    <string name="toast_export_error">%1$s</string>
     <string name="btn_export"></string>
     <string name="option_delete_after_export"></string>
     <string name="hint_delete_after_export"></string>
@@ -115,6 +115,7 @@
         <item></item>
         <item></item>
         <item></item>
+        <item>Cuban Convertible Peso</item>
         <item></item>
         <item></item>
         <item></item>
@@ -192,8 +193,6 @@
         <item></item>
         <item>Palladium</item>
         <item>Pataca</item>
-        <item>Peso Convertible</item>
-        <item>Peso Uruguayo</item>
         <item>Philippine Peso</item>
         <item>Platinum</item>
         <item>Pound Sterling</item>
@@ -242,6 +241,7 @@
         <item>Unidad de Valor Real</item>
         <item>Unidades de fomento</item>
         <item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
+        <item>Uruguayan Peso</item>
         <item></item>
         <item>Uzbekistan Sum</item>
         <item>Vatu</item>
@@ -272,10 +272,9 @@
     <string name="title_about_gnucash">GnuCash</string>
     <string name="summary_about_gnucash">Gnucash for androidOFX GnuCash</string>
     <string name="title_about"></string>
-    <string name="toast_error_exporting">OFX:\n</string>
-    <string name="toast_ofx_exported_to">OFX\n</string>
-    <string name="title_export_email">GnuCash OFX </string>
-    <string name="description_export_email">GnuCash OFX Export from </string>
+    <string name="toast_format_exported_to">%1$s\n</string>
+    <string name="title_export_email">GnuCash Android %1$s </string>
+    <string name="description_export_email">GnuCash Android Export from </string>
     <string name="header_transaction_settings"></string>
     <string name="title_transaction_preferences"></string>
     <string name="title_account_preferences"></string>
@@ -304,11 +303,12 @@
     <string name="title_whats_new"></string>
     <string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
     <string name="label_dismiss"></string>
diff --git a/app/res/values/strings.xml b/app/res/values/strings.xml
index 8a82cf1b..685afd8d 100644
--- a/app/res/values/strings.xml
+++ b/app/res/values/strings.xml
@@ -17,11 +17,11 @@
 
 <resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
     <string name="app_name">GnuCash</string>
-    <string name="app_version_name">1.4.0-beta1</string>
+    <string name="app_version_name">1.4.0-beta2</string>
     <string name="title_add_account">Create Account</string>
     <string name="title_edit_account">Edit Account</string>
     <string name="info_details">Info</string>
-    <string name="menu_export_ofx">Export OFX</string>
+    <string name="menu_export">Export</string>
     <string name="description_add_transaction_icon">Add a new transaction to an account</string>
     <string name="label_no_accounts">No accounts to display</string>
     <string name="label_account_name">Account name</string>
@@ -52,7 +52,7 @@
     <string name="title_export_dialog">Export Transactions</string>
     <string name="option_export_all_transactions">Export all transactions</string>
     <string name="hint_export_choice">By default, only new transactions since last export will be exported. Check this option to export all transactions</string>
-    <string name="toast_export_error">Error exporting data</string>
+    <string name="toast_export_error">Error exporting %1$s file</string>
     <string name="btn_export">Export</string>
     <string name="option_delete_after_export">Delete after export</string>
     <string name="hint_delete_after_export">All exported transactions will be deleted when exporting is completed</string>
@@ -119,6 +119,7 @@
 		<item>Cordoba Oro</item>
 		<item>Costa Rican Colon</item>
 		<item>Croatian Kuna</item>
+        <item>Cuban Convertible Peso</item>
 		<item>Cuban Peso</item>
 		<item>Czech Koruna</item>
 		<item>Dalasi</item>
@@ -196,8 +197,6 @@
 		<item>Pakistan Rupee</item>
 		<item>Palladium</item>
 		<item>Pataca</item>
-		<item>Peso Convertible</item>
-		<item>Peso Uruguayo</item>
 		<item>Philippine Peso</item>
 		<item>Platinum</item>
 		<item>Pound Sterling</item>
@@ -246,7 +245,8 @@
 		<item>Unidad de Valor Real</item>
 		<item>Unidades de fomento</item>
 		<item>Uruguay Peso en Unidades Indexadas (URUIURUI)</item>
-		<item>US Dollar</item>
+        <item>Uruguayan peso</item>
+        <item>US Dollar</item>
 		<item>Uzbekistan Sum</item>
 		<item>Vatu</item>
 		<item>WIR Euro</item>
@@ -297,7 +297,8 @@
 		<item>NIO</item>
 		<item>CRC</item>
 		<item>HRK</item>
-		<item>CUP</item>
+        <item>CUC</item>
+        <item>CUP</item>
 		<item>CZK</item>
 		<item>GMD</item>
 		<item>DKK</item>
@@ -374,8 +375,6 @@
 		<item>PKR</item>
 		<item>XPD</item>
 		<item>MOP</item>
-		<item>CUC</item>
-		<item>UYU</item>
 		<item>PHP</item>
 		<item>XPT</item>
 		<item>GBP</item>
@@ -424,7 +423,8 @@
 		<item>COU</item>
 		<item>CLF</item>
 		<item>UYI</item>
-		<item>USD</item>
+        <item>UYU</item>
+        <item>USD</item>
 		<item>UZS</item>
 		<item>VUV</item>
 		<item>CHE</item>
@@ -455,12 +455,12 @@
 	<string name="toast_no_transactions_to_export">There are no transactions available to export</string>
 	<string name="key_about">about_gnucash</string>
 	<string name="title_about_gnucash">About GnuCash</string>
-	<string name="summary_about_gnucash">Gnucash is a mobile finance expense tracker application for Android.\nIt enables flexible tracking of expenses on-the-go which can be exported to the Open Financial eXchange (OFX) format and imported into GnuCash for the desktop.</string>
+	<string name="summary_about_gnucash">Gnucash is a mobile finance expense tracker application for Android.\n
+        It enables flexible tracking of expenses on-the-go which can be exported to multiple formats (OFX, QIF) and imported into GnuCash for the desktop.</string>
 	<string name="title_about">About</string>
-	<string name="toast_error_exporting">Could not write OFX file to :\n</string>
-	<string name="toast_ofx_exported_to">OFX file exported to:\n</string>
-	<string name="title_export_email">GnuCash OFX export</string>
-	<string name="description_export_email">GnuCash OFX Export from </string>
+	<string name="toast_format_exported_to">%1$s file exported to:\n</string>
+	<string name="title_export_email">GnuCash Android %1$s export</string>
+	<string name="description_export_email">GnuCash Android Export from </string>
 	<string name="header_transaction_settings">Transactions</string>
 	<string name="title_transaction_preferences">Transaction Preferences</string>
 	<string name="title_account_preferences">Account Preferences</string>
@@ -500,11 +500,12 @@
 	<string name="title_whats_new">What\'s New</string>
 	<string name="whats_new">
         - Create multiple splits per transaction\n
-        - Account balances now follow GnuCash Desktop accounting principles\n
-        - Use account-specific labels for CREDIT/DEBITs (accounting terminology)\n
+        - Fixed computation of account balances for different account types\n
+        - Use account-specific labels for CREDIT/DEBITs\n
         - Automated backup of database before deletion operations\n
         - Restore most recent backup of database (in Settings -> General)\n
         - Read transactions from GnuCash XML files (limited support)\n
+        - Option to save opening balances before deleting transactions\n
         - Multiple bug fixes and improvements\n
 	</string>
 	<string name="label_dismiss">Dismiss</string>
diff --git a/app/src/org/gnucash/android/db/AccountsDbAdapter.java b/app/src/org/gnucash/android/db/AccountsDbAdapter.java
index f89ee51d..bbe299c4 100644
--- a/app/src/org/gnucash/android/db/AccountsDbAdapter.java
+++ b/app/src/org/gnucash/android/db/AccountsDbAdapter.java
@@ -67,51 +67,6 @@ public AccountsDbAdapter(SQLiteDatabase db) {
     }
 
     /**
-     * Returns the imbalance account where to store transactions which are not double entry
-     * @param currency Currency of the transaction
-     * @return Imbalance account name
-     */
-    public static String getImbalanceAccountName(Currency currency){
-        return GnuCashApplication.getAppContext().getString(R.string.imbalance_account_name) + "-" + currency.getCurrencyCode();
-    }
-
-    /**
-     * Get the name of the default account for opening balances for the current locale.
-     * For the English locale, it will be "Equity:Opening Balances"
-     * @return Fully qualified account name of the opening balances account
-     */
-    public static String getOpeningBalanceAccountFullName(){
-        Context context = GnuCashApplication.getAppContext();
-        return context.getString(R.string.account_name_equity)
-                + ACCOUNT_NAME_SEPARATOR
-                + context.getString(R.string.account_name_opening_balances);
-    }
-
-    /**
-     * Returns the list of currencies in the database
-     * @return List of currencies in the database
-     */
-    public List<Currency> getCurrencies(){
-        Cursor cursor = mDb.query(true, AccountEntry.TABLE_NAME, new String[]{AccountEntry.COLUMN_CURRENCY},
-                null, null, null, null, null, null);
-        List<Currency> currencyList = new ArrayList<Currency>();
-        if (cursor != null){
-            while (cursor.moveToNext()){
-                String currencyCode = cursor.getString(cursor.getColumnIndexOrThrow(AccountEntry.COLUMN_CURRENCY));
-                currencyList.add(Currency.getInstance(currencyCode));
-            }
-            cursor.close();
-        }
-        return currencyList;
-    }
-
-    @Override
-	public void close() {
-		super.close();
-		mTransactionsAdapter.close();
-	}
-
-    /**
 	 * Adds an account to the database. 
 	 * If an account already exists in the database with the same unique ID, 
 	 * then just update that account. 
@@ -510,7 +465,7 @@ public String createAccountHierarchy(String fullName, AccountType accountType){
         if (fullName == null)
             throw new IllegalArgumentException("The account name cannot be null");
 
-        String[] tokens = fullName.split(ACCOUNT_NAME_SEPARATOR);
+        String[] tokens = fullName.trim().split(ACCOUNT_NAME_SEPARATOR);
         String uid = null;
         String parentName = "";
         for (String token : tokens) {
@@ -1021,7 +976,57 @@ public boolean isFavoriteAccount(long accountId){
         return openingTransactions;
     }
 
-	/**
+
+    /**
+     * Returns the imbalance account where to store transactions which are not double entry
+     * @param currency Currency of the transaction
+     * @return Imbalance account name
+     */
+    public static String getImbalanceAccountName(Currency currency){
+        return GnuCashApplication.getAppContext().getString(R.string.imbalance_account_name) + "-" + currency.getCurrencyCode();
+    }
+
+    /**
+     * Get the name of the default account for opening balances for the current locale.
+     * For the English locale, it will be "Equity:Opening Balances"
+     * @return Fully qualified account name of the opening balances account
+     */
+    public static String getOpeningBalanceAccountFullName(){
+        Context context = GnuCashApplication.getAppContext();
+        String parentEquity = context.getString(R.string.account_name_equity).trim();
+        //German locale has no parent Equity account
+        if (parentEquity.length() > 0) {
+            return parentEquity + ACCOUNT_NAME_SEPARATOR
+                    + context.getString(R.string.account_name_opening_balances);
+        } else
+            return context.getString(R.string.account_name_opening_balances);
+    }
+
+    /**
+     * Returns the list of currencies in the database
+     * @return List of currencies in the database
+     */
+    public List<Currency> getCurrencies(){
+        Cursor cursor = mDb.query(true, AccountEntry.TABLE_NAME, new String[]{AccountEntry.COLUMN_CURRENCY},
+                null, null, null, null, null, null);
+        List<Currency> currencyList = new ArrayList<Currency>();
+        if (cursor != null){
+            while (cursor.moveToNext()){
+                String currencyCode = cursor.getString(cursor.getColumnIndexOrThrow(AccountEntry.COLUMN_CURRENCY));
+                currencyList.add(Currency.getInstance(currencyCode));
+            }
+            cursor.close();
+        }
+        return currencyList;
+    }
+
+    @Override
+    public void close() {
+        super.close();
+        mTransactionsAdapter.close();
+    }
+
+    /**
 	 * Deletes all accounts and their transactions (and their splits) from the database.
      * Basically empties all 3 tables, so use with care ;)
 	 */
diff --git a/app/src/org/gnucash/android/export/ExporterTask.java b/app/src/org/gnucash/android/export/ExporterTask.java
index a4e886f9..051bd809 100644
--- a/app/src/org/gnucash/android/export/ExporterTask.java
+++ b/app/src/org/gnucash/android/export/ExporterTask.java
@@ -52,8 +52,6 @@
 
     private ProgressDialog mProgressDialog;
 
-    private Exporter mExporter;
-
     /**
      * Log tag
      */
@@ -91,7 +89,8 @@ protected void onPreExecute() {
     protected Boolean doInBackground(ExportParams... params) {
         mExportParams = params[0];
 
-            switch (mExportParams.getExportFormat()) {
+        Exporter mExporter;
+        switch (mExportParams.getExportFormat()) {
                 case QIF:
                     mExporter = new QifExporter(mExportParams);
                     break;
@@ -101,6 +100,7 @@ protected Boolean doInBackground(ExportParams... params) {
                     break;
 
                 case GNC_XML:
+                default:
                     mExporter = new GncXmlExporter(mExportParams);
                     break;
             }
@@ -110,7 +110,6 @@ protected Boolean doInBackground(ExportParams... params) {
         } catch (Exception e) {
             e.printStackTrace();
             Log.e(TAG, e.getMessage());
-            //TODO: Internationalize (and correct ofx specific) error message
             Toast.makeText(mContext, R.string.toast_export_error,
                     Toast.LENGTH_LONG).show();
             return false;
@@ -124,10 +123,9 @@ protected Boolean doInBackground(ExportParams... params) {
      */
     @Override
     protected void onPostExecute(Boolean exportResult) {
-        //TODO: generalize format error strings
         if (!exportResult){
             Toast.makeText(mContext,
-                    mContext.getString(R.string.toast_error_exporting),
+                    mContext.getString(R.string.toast_export_error, mExportParams.getExportFormat().name()),
                     Toast.LENGTH_LONG).show();
             return;
         }
@@ -145,7 +143,8 @@ protected void onPostExecute(Boolean exportResult) {
                     copyFile(src, dst);
                 } catch (IOException e) {
                     Toast.makeText(mContext,
-                            mContext.getString(R.string.toast_error_exporting_ofx) + dst.getAbsolutePath(),
+                            mContext.getString(R.string.toast_export_error, mExportParams.getExportFormat().name())
+                                    + dst.getAbsolutePath(),
                             Toast.LENGTH_LONG).show();
                     Log.e(TAG, e.getMessage());
                     break;
@@ -153,7 +152,8 @@ protected void onPostExecute(Boolean exportResult) {
 
                 //file already exists, just let the user know
                 Toast.makeText(mContext,
-                        mContext.getString(R.string.toast_ofx_exported_to) + dst.getAbsolutePath(),
+                        mContext.getString(R.string.toast_format_exported_to, mExportParams.getExportFormat().name())
+                                + dst.getAbsolutePath(),
                         Toast.LENGTH_LONG).show();
                 break;
 
@@ -202,7 +202,8 @@ private void shareFile(String path){
         Intent shareIntent = new Intent(Intent.ACTION_SEND);
         shareIntent.setType("application/xml");
         shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + path));
-        shareIntent.putExtra(Intent.EXTRA_SUBJECT, mContext.getString(R.string.title_export_email));
+        shareIntent.putExtra(Intent.EXTRA_SUBJECT, mContext.getString(R.string.title_export_email,
+                mExportParams.getExportFormat().name()));
         if (defaultEmail != null && defaultEmail.trim().length() > 0){
             shareIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{defaultEmail});
         }
